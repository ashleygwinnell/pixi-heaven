{"version":3,"file":"pixi-heaven.js","sourceRoot":"","sources":["../src/loader.ts","../src/settings.ts","../src/utils.ts","../src/xporter.ts","../src/base/atlas/AtlasNode.ts","../src/base/atlas/BaseTexture.ts","../src/base/atlas/IAtlas.ts","../src/base/atlas/TextureRegion.ts","../src/base/atlas/TextureResource.ts","../src/base/webgl/BatchBuffer.ts","../src/base/webgl/generateMultiTextureShader.ts","../src/base/webgl/SpriteRenderer.ts","../src/hacks/AtlasManager.ts","../src/hacks/BaseTexture.ts","../src/hacks/GroupD8.ts","../src/hacks/WebGLRenderer.ts","../src/mesh/00_Mesh.ts","../src/mesh/10_Plane.ts","../src/mesh/NineSlicePlane.ts","../src/mesh/Rope.ts","../src/mesh/RopePoint.ts","../src/mesh/webgl/MeshColoredRenderer.ts","../src/mesh/webgl/MeshHeavenRenderer.ts","../src/superAtlas/AtlasOptions.ts","../src/superAtlas/SuperAtlas.ts","../src/twotint/ColorTransform.ts","../src/twotint/sprites/convert.ts","../src/twotint/sprites/Sprite.ts","../src/twotint/sprites/SpriteHeavenRenderer.ts","../src/twotint/sprites/SpriteMaskedRenderer.ts","../src/twotint/sprites/SpriteModel.ts","../src/twotint/sprites/Text2d.ts","../src/z_spine/Spine.ts"],"names":[],"mappings":"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","sourcesContent":["declare module PIXI.loaders {\n\tinterface Resource {\n\t\tspritesheet?: PIXI.Spritesheet;\n\t}\n}\n\nnamespace pixi_heaven {\n\timport Resource = PIXI.loaders.Resource;\n\n\texport function atlasChecker() {\n\t\treturn function (resource: PIXI.loaders.Resource, next: () => any) {\n\t\t\tlet atlas = resource.metadata.runtimeAtlas as IAtlas;\n\t\t\tif (!atlas) {\n\t\t\t\treturn next();\n\t\t\t}\n\n\t\t\tif (resource.type === Resource.TYPE.IMAGE) {\n\t\t\t\tif (resource.texture) {\n\t\t\t\t\tresource.texture = atlas.add(resource.texture, true);\n\t\t\t\t}\n\n\t\t\t\treturn next();\n\t\t\t}\n\n\t\t\tif (resource.type === Resource.TYPE.JSON &&\n\t\t\t\tresource.spritesheet) {\n\t\t\t\tresource.spritesheet.textures = atlas.addHash(resource.spritesheet.textures, true);\n\t\t\t\tresource.textures = resource.spritesheet.textures;\n\t\t\t\treturn next();\n\t\t\t}\n\n\t\t\t//TODO: something about spine\n\n\t\t\tnext();\n\t\t};\n\t}\n\n\tPIXI.loaders.Loader.addPixiMiddleware(atlasChecker);\n\tPIXI.loader.use(atlasChecker());\n}","namespace pixi_heaven {\n\texport let settings = {\n\t\tMESH_PLUGIN: 'meshHeaven',\n\t\tSPINE_MESH_PLUGIN: 'spriteHeaven'\n\t}\n}\n","namespace pixi_heaven.utils {\n\texport function createIndicesForQuads(size: number) {\n\t\t// the total number of indices in our array, there are 6 points per quad.\n\n\t\tconst totalIndices = size * 6;\n\n\t\tconst indices = new Uint16Array(totalIndices);\n\n\t\t// fill the indices with the quads to draw\n\t\tfor (let i = 0, j = 0; i < totalIndices; i += 6, j += 4) {\n\t\t\tindices[i + 0] = j + 0;\n\t\t\tindices[i + 1] = j + 1;\n\t\t\tindices[i + 2] = j + 2;\n\t\t\tindices[i + 3] = j + 0;\n\t\t\tindices[i + 4] = j + 2;\n\t\t\tindices[i + 5] = j + 3;\n\t\t}\n\n\t\treturn indices;\n\t}\n\n\t//bit twiddle is here\n\n\texport function isPow2(v: number): boolean {\n\t\treturn !(v & (v - 1)) && (!!v);\n\t}\n\n\texport function nextPow2(v: number): number {\n\t\tv += +(v === 0);\n\t\t--v;\n\t\tv |= v >>> 1;\n\t\tv |= v >>> 2;\n\t\tv |= v >>> 4;\n\t\tv |= v >>> 8;\n\t\tv |= v >>> 16;\n\t\treturn v + 1;\n\t}\n\n\texport function log2(v: number) {\n\t\tlet r: number, shift: number;\n\t\tr = +(v > 0xFFFF) << 4;\n\t\tv >>>= r;\n\t\tshift = +(v > 0xFF  ) << 3;\n\t\tv >>>= shift;\n\t\tr |= shift;\n\t\tshift = +(v > 0xF   ) << 2;\n\t\tv >>>= shift;\n\t\tr |= shift;\n\t\tshift = +(v > 0x3   ) << 1;\n\t\tv >>>= shift;\n\t\tr |= shift;\n\t\treturn r | (v >> 1);\n\t}\n}\n","///<reference types=\"pixi.js\"/>\n(PIXI as any).heaven = pixi_heaven;\n","namespace pixi_heaven {\n\timport Rectangle = PIXI.Rectangle;\n\n\tconst INF = 1 << 20;\n\t\n\t//TODO: add some padding\n\n\texport class AtlasNode<T> {\n\t\tpublic childs: Array<AtlasNode<T>> = [];\n\t\tpublic rect = new Rectangle(0, 0, INF, INF);\n\t\tpublic data: T = null;\n\n\t\tpublic insert(atlasWidth: number, atlasHeight: number,\n\t\t              width: number, height: number, data: T): AtlasNode<T> {\n\t\t\tif (this.childs.length > 0) {\n\t\t\t\tconst newNode: AtlasNode<T> = this.childs[0].insert(\n\t\t\t\t\tatlasWidth, atlasHeight,\n\t\t\t\t\twidth, height, data);\n\t\t\t\tif (newNode != null) {\n\t\t\t\t\treturn newNode;\n\t\t\t\t}\n\t\t\t\treturn this.childs[1].insert(atlasWidth, atlasHeight, width, height, data);\n\t\t\t} else {\n\t\t\t\tlet rect: Rectangle = this.rect;\n\t\t\t\tif (this.data != null) return null;\n\n\t\t\t\tconst w = Math.min(rect.width, atlasWidth - rect.x);\n\n\t\t\t\tif (width > rect.width ||\n\t\t\t\t\twidth > atlasWidth - rect.x ||\n\t\t\t\t\theight > rect.height ||\n\t\t\t\t\theight > atlasHeight - rect.y) return null;\n\n\t\t\t\tif (width == rect.width && height == rect.height) {\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\treturn this;\n\t\t\t\t}\n\n\t\t\t\tthis.childs.push(new AtlasNode<T>());\n\t\t\t\tthis.childs.push(new AtlasNode<T>());\n\n\t\t\t\tconst dw: Number = rect.width - width;\n\t\t\t\tconst dh: Number = rect.height - height;\n\n\t\t\t\tif (dw > dh) {\n\t\t\t\t\tthis.childs[0].rect = new Rectangle(rect.x, rect.y, width, rect.height);\n\t\t\t\t\tthis.childs[1].rect = new Rectangle(rect.x + width, rect.y, rect.width - width, rect.height);\n\t\t\t\t} else {\n\t\t\t\t\tthis.childs[0].rect = new Rectangle(rect.x, rect.y, rect.width, height);\n\t\t\t\t\tthis.childs[1].rect = new Rectangle(rect.x, rect.y + height, rect.width, rect.height - height);\n\t\t\t\t}\n\n\t\t\t\treturn this.childs[0].insert(atlasWidth, atlasHeight, width, height, data);\n\t\t\t}\n\t\t}\n\t}\n}\n","namespace pixi_heaven {\n\t// export class BaseTexture {\n\t// }\n}","namespace pixi_heaven {\n\timport BaseTexture = PIXI.BaseTexture;\n\timport Texture = PIXI.Texture;\n\timport WebGLRenderer = PIXI.WebGLRenderer;\n\n\texport class AtlasEntry {\n\t\tbaseTexture: BaseTexture;\n\t\tatlas: IAtlas;\n\t\tcurrentNode: AtlasNode<AtlasEntry>;\n\t\tcurrentAtlas: SuperAtlas;\n\t\twidth: number;\n\t\theight: number;\n\n\t\tnodeUpdateID: number = 0;\n\n\t\tregions: Array<TextureRegion> = [];\n\n\t\tconstructor(atlas: IAtlas, baseTexture: BaseTexture) {\n\t\t\tthis.baseTexture = baseTexture;\n\t\t\tthis.width = baseTexture.width;\n\t\t\tthis.height = baseTexture.height;\n\t\t\tthis.atlas = atlas;\n\t\t}\n\t}\n\n\texport interface IRepackResult {\n\t\t// goodMap: { [key: string]: AtlasNode<AtlasEntry> };\n\t\tfailed: Array<AtlasEntry>;\n\n\t\tapply(): void;\n\t}\n\n\texport interface IAtlas {\n\t\tadd(texture: BaseTexture | Texture, swapCache ?: boolean): TextureRegion;\n\n\t\taddHash(textures: { [key: string]: Texture }, swapCache ?: boolean): { [key: string]: TextureRegion };\n\n\t\trepack(): IRepackResult;\n\n\t\tprepare(renderer: WebGLRenderer): Promise<void>;\n\t}\n}\n","namespace pixi_heaven {\n\timport Texture = PIXI.Texture;\n\timport Rectangle = PIXI.Rectangle;\n\n\t//TODO: support resolution\n\t//TODO: support no-frame\n\t//TODO: support updates\n\n\texport class TextureRegion extends PIXI.Texture {\n\t\tuid = PIXI.utils.uid();\n\n\t\tproxied: Texture;\n\t\tentry: AtlasEntry;\n\n\t\tconstructor(entry: AtlasEntry, texture: PIXI.Texture = new Texture(entry.baseTexture)) {\n\t\t\tsuper(entry.currentAtlas ? entry.currentAtlas.baseTexture : texture.baseTexture,\n\t\t\t\tentry.currentNode ? new Rectangle(texture.frame.x + entry.currentNode.rect.x,\n\t\t\t\t\ttexture.frame.y + entry.currentNode.rect.y,\n\t\t\t\t\ttexture.frame.width,\n\t\t\t\t\ttexture.frame.height) : texture.frame.clone(),\n\t\t\t\ttexture.orig,\n\t\t\t\ttexture.trim,\n\t\t\t\ttexture.rotate\n\t\t\t);\n\t\t\tthis.proxied = texture;\n\t\t\tthis.entry = entry;\n\t\t}\n\n\t\tupdateFrame() {\n\t\t\tconst texture = this.proxied;\n\t\t\tconst entry = this.entry;\n\t\t\tconst frame = this._frame;\n\t\t\tif (entry.currentNode) {\n\t\t\t\tthis.baseTexture = entry.currentAtlas.baseTexture;\n\t\t\t\tframe.x = texture.frame.x + entry.currentNode.rect.x;\n\t\t\t\tframe.y = texture.frame.y + entry.currentNode.rect.y;\n\t\t\t} else {\n\t\t\t\tthis.baseTexture = texture.baseTexture;\n\t\t\t\tframe.x = texture.frame.x;\n\t\t\t\tframe.y = texture.frame.y;\n\t\t\t}\n\n\t\t\tframe.width = texture.frame.width;\n\t\t\tframe.height = texture.frame.height;\n\t\t\tthis._updateUvs();\n\t\t}\n\t}\n}\n","namespace pixi_heaven {\n\texport interface ITextureResource {\n\t\tonTextureUpload(renderer: PIXI.WebGLRenderer, baseTexture: PIXI.BaseTexture, glTexture: PIXI.glCore.GLTexture): boolean;\n\n\t\tonTextureTag?(baseTexture: PIXI.BaseTexture): void;\n\n\t\tonTextureNew?(baseTexture: PIXI.BaseTexture): void;\n\n\t\tonTextureDestroy?(baseTexture: PIXI.BaseTexture): boolean;\n\t}\n}\n","namespace pixi_heaven.webgl {\n\texport class BatchBuffer {\n\t\tvertices: ArrayBuffer;\n\t\tfloat32View: Float32Array;\n\t\tuint32View: Uint32Array;\n\n\n\t\tconstructor(size: number) {\n\t\t\tthis.vertices = new ArrayBuffer(size);\n\n\t\t\t/**\n\t\t\t * View on the vertices as a Float32Array for positions\n\t\t\t *\n\t\t\t * @member {Float32Array}\n\t\t\t */\n\t\t\tthis.float32View = new Float32Array(this.vertices);\n\n\t\t\t/**\n\t\t\t * View on the vertices as a Uint32Array for uvs\n\t\t\t *\n\t\t\t * @member {Float32Array}\n\t\t\t */\n\t\t\tthis.uint32View = new Uint32Array(this.vertices);\n\t\t}\n\n\t\t/**\n\t\t * Destroys the buffer.\n\t\t *\n\t\t */\n\t\tdestroy() {\n\t\t\tthis.vertices = null;\n\t\t}\n\t}\n}\n","namespace pixi_heaven.webgl {\n\texport function generateMultiTextureShader(vertexSrc: string, fragmentSrc: string, gl: WebGLRenderingContext, maxTextures: number) {\n\t\tfragmentSrc = fragmentSrc.replace(/%count%/gi, maxTextures + '');\n\t\tfragmentSrc = fragmentSrc.replace(/%forloop%/gi, generateSampleSrc(maxTextures));\n\n\t\tconst shader = new PIXI.Shader(gl, vertexSrc, fragmentSrc);\n\n\t\tconst sampleValues = new Int32Array(maxTextures);\n\n\t\tfor (let i = 0; i < maxTextures; i++) {\n\t\t\tsampleValues[i] = i;\n\t\t}\n\n\t\tshader.bind();\n\t\tshader.uniforms.uSamplers = sampleValues;\n\n\t\treturn shader;\n\t}\n\n\tfunction generateSampleSrc(maxTextures: number) {\n\t\tlet src = '';\n\n\t\tsrc += '\\n';\n\t\tsrc += '\\n';\n\n\t\tfor (let i = 0; i < maxTextures; i++) {\n\t\t\tif (i > 0) {\n\t\t\t\tsrc += '\\nelse ';\n\t\t\t}\n\n\t\t\tif (i < maxTextures - 1) {\n\t\t\t\tsrc += `if(textureId == ${i}.0)`;\n\t\t\t}\n\n\t\t\tsrc += '\\n{';\n\t\t\tsrc += `\\n\\ttexColor = texture2D(uSamplers[${i}], texCoord);`;\n\t\t\tsrc += '\\n}';\n\t\t}\n\n\t\tsrc += '\\n';\n\t\tsrc += '\\n';\n\n\t\treturn src;\n\t}\n}\n","declare module PIXI {\n\texport interface ObjectRenderer {\n\t\trenderer: WebGLRenderer;\n\t}\n\n\texport interface BaseTexture {\n\t\t_virtalBoundId: number;\n\t}\n}\n\nnamespace pixi_heaven.webgl {\n\timport BaseTexture = PIXI.BaseTexture;\n\timport ObjectRenderer = PIXI.ObjectRenderer;\n\timport settings = PIXI.settings;\n\timport GLBuffer = PIXI.glCore.GLBuffer;\n\timport VertexArrayObject = PIXI.glCore.VertexArrayObject;\n\n\timport WebGLRenderer = PIXI.WebGLRenderer;\n\timport Sprite = PIXI.Sprite;\n\n\timport premultiplyBlendMode = PIXI.utils.premultiplyBlendMode;\n\n\tlet TICK = 1 << 20;\n\n\texport class BatchGroup {\n\t\ttextures: Array<BaseTexture> = [];\n\t\ttextureCount = 0;\n\t\tids: Array<Number> = [];\n\t\tsize = 0;\n\t\tstart = 0;\n\t\tblend = PIXI.BLEND_MODES.NORMAL;\n\t\tuniforms: any = null;\n\t}\n\n\texport abstract class MultiTextureSpriteRenderer extends ObjectRenderer {\n\t\tshaderVert = '';\n\t\tshaderFrag = '';\n\t\tMAX_TEXTURES_LOCAL = 32;\n\n\t\tabstract createVao(vertexBuffer: GLBuffer): PIXI.glCore.VertexArrayObject;\n\n\t\tabstract fillVertices(float32View: Float32Array, uint32View: Uint32Array,\n\t\t                      index: number, sprite: any, textureId: number): void;\n\n\t\tgetUniforms(spr: PIXI.Sprite): any {\n\t\t\treturn null;\n\t\t}\n\n\t\tsyncUniforms(obj: any) {\n\t\t\tif (!obj) return;\n\t\t\tlet sh = this.shader;\n\t\t\tfor (let key in obj) {\n\t\t\t\tsh.uniforms[key] = obj[key];\n\t\t\t}\n\t\t}\n\n\t\tvertSize = 5;\n\t\tvertByteSize = this.vertSize * 4;\n\t\tsize = settings.SPRITE_BATCH_SIZE;\n\t\tbuffers: Array<BatchBuffer>;\n\t\tbuffersIndex: Array<Uint16Array>;\n\n\t\tbigMeshVertexBuffer: BatchBuffer = null;\n\n\t\tindices: Uint16Array;\n\n\t\tshader: PIXI.Shader;\n\n\t\tcurrentIndex = 0;\n\t\tgroups: Array<BatchGroup>;\n\t\tsprites: Array<any> = [];\n\n\t\tcountVertex = 0;\n\t\tcountIndex = 0;\n\n\t\tindexBuffer: GLBuffer;\n\t\tvertexBuffers: Array<GLBuffer> = [];\n\t\tindexBuffers: Array<GLBuffer> = [];\n\n\t\tvaos: Array<VertexArrayObject> = [];\n\t\tvao: VertexArrayObject;\n\t\tvaoMax = 2;\n\t\tvertexCount = 0;\n\n\t\tMAX_TEXTURES = 1;\n\t\tchangedIndexBuffer = 0;\n\n\t\t/**\n\t\t * @param {PIXI.WebGLRenderer} renderer - The renderer this sprite batch works for.\n\t\t */\n\t\tconstructor(renderer: WebGLRenderer) {\n\t\t\tsuper(renderer);\n\n\t\t\tthis.indices = utils.createIndicesForQuads(this.size);\n\n\t\t\tthis.groups = [];\n\t\t\tfor (let k = 0; k < this.size; k++) {\n\t\t\t\tthis.groups[k] = new BatchGroup();\n\t\t\t}\n\n\t\t\tthis.vaoMax = 2;\n\t\t\tthis.vertexCount = 0;\n\n\t\t\tthis.renderer.on('prerender', this.onPrerender, this);\n\t\t}\n\n\t\tgenShader(){\n\t\t\tconst gl = this.renderer.gl;\n\n\t\t\tthis.MAX_TEXTURES = Math.min(this.MAX_TEXTURES_LOCAL, this.renderer.plugins['sprite'].MAX_TEXTURES);\n\n\t\t\tthis.shader = generateMultiTextureShader(this.shaderVert, this.shaderFrag, gl, this.MAX_TEXTURES);\n\t\t}\n\n\t\t/**\n\t\t * Sets up the renderer context and necessary buffers.\n\t\t *\n\t\t * @private\n\t\t */\n\t\tonContextChange() {\n\t\t\tconst gl = this.renderer.gl;\n\t\t\t// generate generateMultiTextureProgram, may be a better move?\n\t\t\tthis.genShader();\n\n\t\t\t// we use the second shader as the first one depending on your browser may omit aTextureId\n\t\t\t// as it is not used by the shader so is optimized out.\n\t\t\tthis.renderer.bindVao(null);\n\n\t\t\tthis.indexBuffer = GLBuffer.createIndexBuffer(gl, this.indices, gl.STATIC_DRAW);\n\n\t\t\tfor (let i = 0; i < this.vaoMax; i++) {\n\t\t\t\t/* eslint-disable max-len */\n\t\t\t\tconst vertexBuffer = this.vertexBuffers[i] = GLBuffer.createVertexBuffer(gl, null, gl.STREAM_DRAW);\n\t\t\t\t/* eslint-enable max-len */\n\n\t\t\t\t// build the vao object that will render..\n\t\t\t\tthis.vaos[i] = this.createVao(vertexBuffer);\n\t\t\t\tthis.indexBuffers[i] = GLBuffer.createIndexBuffer(gl, null, gl.STREAM_DRAW);\n\t\t\t}\n\n\t\t\tif (!this.buffers) {\n\t\t\t\tthis.buffers = [];\n\t\t\t\tthis.buffersIndex = [];\n\t\t\t\tfor (let i = 1; i <= utils.nextPow2(this.size); i *= 2) {\n\t\t\t\t\tthis.buffers.push(new BatchBuffer(i * 4 * this.vertByteSize));\n\t\t\t\t}\n\t\t\t\tfor (let i = 1; i <= utils.nextPow2(this.size); i *= 2) {\n\t\t\t\t\tthis.buffersIndex.push(new Uint16Array(i * 6));\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.vao = this.vaos[0];\n\t\t}\n\n\t\t/**\n\t\t * Called before the renderer starts rendering.\n\t\t *\n\t\t */\n\t\tonPrerender() {\n\t\t\tthis.vertexCount = 0;\n\t\t}\n\n\t\t/**\n\t\t * Renders the sprite object.\n\t\t *\n\t\t * @param {PIXI.Sprite} sprite - the sprite to render when using this spritebatch\n\t\t */\n\t\trender(element: any) {\n\t\t\t// if the uvs have not updated then no point rendering just yet!\n\t\t\tif (!element._texture._uvs) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!element._texture.baseTexture) {\n\t\t\t\t//WTF, Rpgmaker MV?\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet countVertex = 4;\n\t\t\tlet countIndex = 6;\n\n\t\t\tif (element.vertices) {\n\t\t\t\t//mesh !\n\t\t\t\tcountVertex = element.vertices.length / 2;\n\t\t\t\tcountIndex = element.indices.length;\n\n\t\t\t\telement.calculateVertices();\n\t\t\t}\n\t\t\t// TODO set blend modes..\n\t\t\t// check texture..\n\t\t\tif (this.currentIndex >= this.size ||\n\t\t\t\tcountVertex + this.countVertex > this.size * 4 ||\n\t\t\t\tcountIndex + this.countIndex > this.size * 6) {\n\t\t\t\tthis.flush();\n\t\t\t}\n\n\t\t\tif (countVertex > this.size * 4 ||\n\t\t\t\tcountIndex > this.size * 6) {\n\t\t\t\tthis.renderSingleMesh(element);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.countVertex += countVertex;\n\t\t\tthis.countIndex += countIndex;\n\n\t\t\t// push a texture.\n\t\t\t// increment the batchsize\n\t\t\tthis.sprites[this.currentIndex++] = element;\n\t\t}\n\n\t\trenderSingleMesh(mesh: mesh.Mesh) {\n\t\t\tconst renderer = this.renderer;\n\t\t\tconst gl = renderer.gl;\n\n\t\t\tthis.renderer.state.setBlendMode(\n\t\t\t\tpremultiplyBlendMode[mesh._texture.baseTexture.premultipliedAlpha ? 1 : 0][mesh.blendMode]\n\t\t\t);\n\n\t\t\tconst textureId = this.renderer.bindTexture(mesh._texture.baseTexture);\n\n\t\t\tconst curVertexCount = this.vertexCount;\n\t\t\tconst isNewBuffer = this.checkVaoMax();\n\n\t\t\tif (!this.bigMeshVertexBuffer ||\n\t\t\t\tthis.bigMeshVertexBuffer.vertices.byteLength < this.vertByteSize * mesh.vertices.length) {\n\t\t\t\tthis.bigMeshVertexBuffer = new BatchBuffer(this.vertByteSize * mesh.vertices.length);\n\t\t\t}\n\n\t\t\tmesh.calculateVertices();\n\t\t\tthis.fillVertices(this.bigMeshVertexBuffer.float32View, this.bigMeshVertexBuffer.uint32View,\n\t\t\t\t0, mesh, textureId);\n\n\t\t\tthis.vertexBuffers[curVertexCount].upload(this.bigMeshVertexBuffer.vertices, 0, !isNewBuffer);\n\t\t\tthis.indexBuffers[curVertexCount].upload(mesh.indices, 0, false);\n\n\t\t\tgl.drawElements(gl.TRIANGLES, mesh.indices.length, gl.UNSIGNED_SHORT, 0);\n\t\t}\n\n\t\tcheckVaoMax() {\n\t\t\tif (settings.CAN_UPLOAD_SAME_BUFFER) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst renderer = this.renderer;\n\t\t\tconst gl = renderer.gl;\n\n\t\t\t// this is still needed for IOS performance..\n\t\t\t// it really does not like uploading to the same buffer in a single frame!\n\t\t\tif (this.vaoMax <= this.vertexCount) {\n\t\t\t\tthis.vaoMax++;\n\n\t\t\t\t/* eslint-disable max-len */\n\t\t\t\tconst vertexBuffer = this.vertexBuffers[this.vertexCount] = GLBuffer.createVertexBuffer(gl, null, gl.STREAM_DRAW);\n\t\t\t\tthis.vaos[this.vertexCount] = this.createVao(vertexBuffer);\n\t\t\t\tthis.indexBuffers[this.vertexCount] = GLBuffer.createIndexBuffer(gl, null, gl.STREAM_DRAW);\n\t\t\t\t/* eslint-enable max-len */\n\n\t\t\t\tthis.vertexCount++;\n\t\t\t} else {\n\t\t\t\trenderer.bindVao(this.vaos[this.vertexCount]);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\t/**\n\t\t * Renders the content and empties the current batch.\n\t\t *\n\t\t */\n\t\tflush() {\n\t\t\tif (this.currentIndex === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst gl = this.renderer.gl;\n\t\t\tconst MAX_TEXTURES = this.MAX_TEXTURES;\n\n\t\t\tlet np2 = utils.nextPow2(Math.ceil(this.countVertex / 4));\n\t\t\tlet log2 = utils.log2(np2);\n\t\t\tconst buffer = this.buffers[log2];\n\n\t\t\tnp2 = utils.nextPow2(Math.ceil(this.countIndex / 6));\n\t\t\tlog2 = utils.log2(np2);\n\t\t\tconst bufferIndex = this.buffersIndex[log2];\n\n\t\t\tconst sprites = this.sprites;\n\t\t\tconst groups = this.groups;\n\n\t\t\tconst float32View = buffer.float32View;\n\t\t\tconst uint32View = buffer.uint32View;\n\n\t\t\t// const touch = 0;// this.renderer.textureGC.count;\n\n\t\t\tlet nextTexture: any;\n\t\t\tlet currentTexture: BaseTexture;\n\t\t\tlet currentUniforms: any = null;\n\t\t\tlet groupCount = 1;\n\t\t\tlet textureCount = 0;\n\t\t\tlet currentGroup = groups[0];\n\t\t\tlet blendMode = premultiplyBlendMode[\n\t\t\t\t(sprites[0] as any)._texture.baseTexture.premultipliedAlpha ? 1 : 0][sprites[0].blendMode];\n\t\t\tlet hasMesh = false;\n\n\t\t\tcurrentGroup.textureCount = 0;\n\t\t\tcurrentGroup.start = 0;\n\t\t\tcurrentGroup.blend = blendMode;\n\n\t\t\tTICK++;\n\n\t\t\tlet i;\n\t\t\tlet posVertex = 0;\n\t\t\tlet posIndex = 0;\n\n\t\t\tfor (i = 0; i < this.currentIndex; ++i) {\n\t\t\t\t// upload the sprite elemetns...\n\t\t\t\t// they have all ready been calculated so we just need to push them into the buffer.\n\n\t\t\t\t// upload the sprite elemetns...\n\t\t\t\t// they have all ready been calculated so we just need to push them into the buffer.\n\t\t\t\tconst sprite = sprites[i] as any;\n\n\t\t\t\tnextTexture = sprite._texture.baseTexture;\n\n\t\t\t\tconst spriteBlendMode = premultiplyBlendMode[Number(nextTexture.premultipliedAlpha)][sprite.blendMode];\n\n\t\t\t\tif (blendMode !== spriteBlendMode) {\n\t\t\t\t\t// finish a group..\n\t\t\t\t\tblendMode = spriteBlendMode;\n\n\t\t\t\t\t// force the batch to break!\n\t\t\t\t\tcurrentTexture = null;\n\t\t\t\t\ttextureCount = MAX_TEXTURES;\n\t\t\t\t\tTICK++;\n\t\t\t\t}\n\n\t\t\t\tconst uniforms = this.getUniforms(sprite);\n\t\t\t\tif (currentUniforms !== uniforms) {\n\t\t\t\t\tcurrentUniforms = uniforms;\n\n\t\t\t\t\tcurrentTexture = null;\n\t\t\t\t\ttextureCount = MAX_TEXTURES;\n\t\t\t\t\tTICK++;\n\t\t\t\t}\n\n\t\t\t\tif (currentTexture !== nextTexture) {\n\t\t\t\t\tcurrentTexture = nextTexture;\n\n\t\t\t\t\tif (nextTexture._enabled !== TICK) {\n\t\t\t\t\t\tif (textureCount === MAX_TEXTURES) {\n\t\t\t\t\t\t\tTICK++;\n\n\t\t\t\t\t\t\ttextureCount = 0;\n\t\t\t\t\t\t\tcurrentGroup.size = posIndex - currentGroup.start;\n\t\t\t\t\t\t\tcurrentGroup = groups[groupCount++];\n\t\t\t\t\t\t\tcurrentGroup.textureCount = 0;\n\t\t\t\t\t\t\tcurrentGroup.blend = blendMode;\n\t\t\t\t\t\t\tcurrentGroup.start = posIndex;\n\t\t\t\t\t\t\tcurrentGroup.uniforms = currentUniforms;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnextTexture._enabled = TICK;\n\t\t\t\t\t\tnextTexture._virtalBoundId = textureCount;\n\n\t\t\t\t\t\tcurrentGroup.textures[currentGroup.textureCount++] = nextTexture;\n\t\t\t\t\t\ttextureCount++;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.fillVertices(float32View, uint32View, posVertex * this.vertSize, sprite, nextTexture._virtalBoundId);\n\n\t\t\t\tif (sprite.indices) {\n\t\t\t\t\tconst len = sprite.indices.length;\n\t\t\t\t\tfor (let k=0; k<len; k++) {\n\t\t\t\t\t\tbufferIndex[posIndex++] = posVertex + sprite.indices[k];\n\t\t\t\t\t}\n\t\t\t\t\thasMesh = true;\n\t\t\t\t} else {\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 1;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 2;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 2;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 3;\n\t\t\t\t}\n\t\t\t\tposVertex += sprite.vertexData.length / 2;\n\t\t\t}\n\n\t\t\tcurrentGroup.size = posIndex - currentGroup.start;\n\n\t\t\tconst curVertexCount = this.vertexCount;\n\t\t\tconst isNewBuffer = this.checkVaoMax();\n\n\t\t\tthis.vertexBuffers[curVertexCount].upload(buffer.vertices, 0, !isNewBuffer);\n\t\t\tif (hasMesh) {\n\t\t\t\tthis.indexBuffers[curVertexCount].upload(bufferIndex, 0);\n\t\t\t} else {\n\t\t\t\tthis.indexBuffer.bind();\n\t\t\t}\n\n\t\t\t// render the groups..\n\t\t\tfor (i = 0; i < groupCount; i++) {\n\t\t\t\tconst group = groups[i];\n\t\t\t\tconst groupTextureCount = group.textureCount;\n\n\t\t\t\tif (group.uniforms !== currentUniforms) {\n\t\t\t\t\tthis.syncUniforms(group.uniforms);\n\t\t\t\t}\n\n\t\t\t\tfor (let j = 0; j < groupTextureCount; j++) {\n\t\t\t\t\tthis.renderer.bindTexture(group.textures[j], j, true);\n\t\t\t\t\tgroup.textures[j]._virtalBoundId = -1;\n\n\t\t\t\t\tconst v = this.shader.uniforms.samplerSize;\n\t\t\t\t\tif (v) {\n\t\t\t\t\t\tv[0] = group.textures[j].realWidth;\n\t\t\t\t\t\tv[1] = group.textures[j].realHeight;\n\t\t\t\t\t\tthis.shader.uniforms.samplerSize = v;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// set the blend mode..\n\t\t\t\tthis.renderer.state.setBlendMode(group.blend);\n\n\t\t\t\tgl.drawElements(gl.TRIANGLES, group.size, gl.UNSIGNED_SHORT, group.start * 2);\n\t\t\t}\n\n\t\t\t// reset sprites for the next flush\n\t\t\tthis.currentIndex = 0;\n\t\t\tthis.countVertex = 0;\n\t\t\tthis.countIndex = 0;\n\t\t}\n\n\t\t/**\n\t\t * Starts a new sprite batch.\n\t\t */\n\t\tstart() {\n\t\t\tthis.renderer.bindShader(this.shader);\n\n\t\t\tif (settings.CAN_UPLOAD_SAME_BUFFER) {\n\t\t\t\t// bind buffer #0, we don't need others\n\t\t\t\tthis.renderer.bindVao(this.vaos[this.vertexCount]);\n\n\t\t\t\tthis.vertexBuffers[this.vertexCount].bind();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Stops and flushes the current batch.\n\t\t *\n\t\t */\n\t\tstop() {\n\t\t\tthis.flush();\n\t\t}\n\n\t\t/**\n\t\t * Destroys the SpriteRenderer.\n\t\t *\n\t\t */\n\t\tdestroy() {\n\t\t\tfor (let i = 0; i < this.vaoMax; i++) {\n\t\t\t\tif (this.vertexBuffers[i]) {\n\t\t\t\t\tthis.vertexBuffers[i].destroy();\n\t\t\t\t}\n\t\t\t\tif (this.indexBuffers[i]) {\n\t\t\t\t\tthis.indexBuffers[i].destroy();\n\t\t\t\t}\n\t\t\t\tif (this.vaos[i]) {\n\t\t\t\t\tthis.vaos[i].destroy();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this.indexBuffer) {\n\t\t\t\tthis.indexBuffer.destroy();\n\t\t\t}\n\n\t\t\tthis.renderer.off('prerender', this.onPrerender, this);\n\n\t\t\tsuper.destroy();\n\n\t\t\tif (this.shader) {\n\t\t\t\tthis.shader.destroy();\n\t\t\t\tthis.shader = null;\n\t\t\t}\n\n\t\t\tthis.vertexBuffers = null;\n\t\t\tthis.vaos = null;\n\t\t\tthis.indexBuffer = null;\n\t\t\tthis.indices = null;\n\n\t\t\tthis.sprites = null;\n\n\t\t\tfor (let i = 0; i < this.buffers.length; ++i) {\n\t\t\t\tthis.buffers[i].destroy();\n\t\t\t}\n\t\t\tthis.buffersIndex = null;\n\t\t}\n\t}\n}\n","///<reference types=\"webgl-ext\"/>\n\nmodule pixi_heaven {\n    export interface Extensions {\n        depthTexture: WebGLDepthTexture;\n        floatTexture: OESTextureFloat;\n    }\n\n\texport class AtlasManager {\n\t\t/**\n\t\t * A reference to the current renderer\n\t\t *\n\t\t * @member {PIXI.WebGLRenderer}\n\t\t */\n\t\trenderer: PIXI.WebGLRenderer;\n\n\t\t/**\n\t\t * The current WebGL rendering context\n\t\t *\n\t\t * @member {WebGLRenderingContext}\n\t\t */\n\t\tgl: WebGLRenderingContext;\n\n\t\textensions: Extensions = null;\n\n\t\tconstructor(renderer: PIXI.WebGLRenderer) {\n\t\t\tthis.renderer = renderer;\n\n\t\t\trenderer.on('context', this.onContextChange);\n\t\t}\n\n\t\tonContextChange = (gl: WebGLRenderingContext) => {\n\t\t\tthis.gl = gl;\n\t\t\tthis.renderer.textureManager.updateTexture = this.updateTexture;\n\n\t\t\tthis.extensions = {\n                depthTexture: gl.getExtension('WEBKIT_WEBGL_depth_texture'),\n                floatTexture: gl.getExtension('OES_texture_float'),\n\t\t\t};\n\t\t};\n\n\n\t\t//TODO: make boundTextures faster?\n\n\t\tupdateTexture = (texture_: PIXI.BaseTexture | PIXI.Texture, location?: number) => {\n\t\t\tconst tm = this.renderer.textureManager;\n\t\t\tconst gl = this.gl;\n\t\t\tconst anyThis = this as any;\n\n\t\t\tconst texture: any = (texture_ as any).baseTexture || texture_;\n\t\t\tconst isRenderTexture = !!texture._glRenderTargets;\n\n\t\t\tif (!texture.hasLoaded) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconst boundTextures: Array<PIXI.BaseTexture> = this.renderer.boundTextures as any;\n\n\t\t\t// if the location is undefined then this may have been called by n event.\n\t\t\t// this being the cas e the texture may already be bound to a slot. As a texture can only be bound once\n\t\t\t// we need to find its current location if it exists.\n\t\t\tif (location === undefined) {\n\t\t\t\tlocation = 0;\n\n\t\t\t\t// TODO maybe we can use texture bound ids later on...\n\t\t\t\t// check if texture is already bound..\n\t\t\t\tfor (let i = 0; i < boundTextures.length; ++i) {\n\t\t\t\t\tif (boundTextures[i] === texture) {\n\t\t\t\t\t\tlocation = i;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tboundTextures[location] = texture;\n\n\t\t\tgl.activeTexture(gl.TEXTURE0 + location);\n\n\t\t\tlet glTexture = texture._glTextures[this.renderer.CONTEXT_UID];\n\n\t\t\tif (!glTexture) {\n\t\t\t\tif (isRenderTexture) {\n\t\t\t\t\tconst renderTarget = new PIXI.RenderTarget(\n\t\t\t\t\t\tthis.gl,\n\t\t\t\t\t\ttexture.width,\n\t\t\t\t\t\ttexture.height,\n\t\t\t\t\t\ttexture.scaleMode,\n\t\t\t\t\t\ttexture.resolution\n\t\t\t\t\t);\n\n\t\t\t\t\trenderTarget.resize(texture.width, texture.height);\n\t\t\t\t\ttexture._glRenderTargets[this.renderer.CONTEXT_UID] = renderTarget;\n\t\t\t\t\tglTexture = renderTarget.texture;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tglTexture = new PIXI.glCore.GLTexture(this.gl, null, null, texture.glFormat, texture.glType);\n\t\t\t\t\tglTexture.bind(location);\n\t\t\t\t}\n\t\t\t\ttexture._glTextures[this.renderer.CONTEXT_UID] = glTexture;\n\n\t\t\t\ttexture.on('update', tm.updateTexture, tm);\n\t\t\t\ttexture.on('dispose', tm.destroyTexture, tm);\n\t\t\t} else if (isRenderTexture) {\n\t\t\t\ttexture._glRenderTargets[this.renderer.CONTEXT_UID].resize(texture.width, texture.height);\n\t\t\t}\n\n\t\t\tglTexture.premultiplyAlpha = texture.premultipliedAlpha;\n\n\t\t\tif (!isRenderTexture) {\n                if (!texture.resource) {\n                    glTexture.upload(texture.source);\n                } else if (!texture.resource.onTextureUpload(this.renderer, texture, glTexture)) {\n                    glTexture.uploadData(null, texture.realWidth, texture.realHeight);\n                }\n            }\n\n\t\t\t// lets only update what changes..\n\t\t\tif (texture.forceUploadStyle) {\n\t\t\t\tthis.setStyle(texture, glTexture);\n\t\t\t}\n\t\t\tglTexture._updateID = texture._updateID;\n\t\t\treturn glTexture;\n\t\t};\n\n\t\tsetStyle(texture: PIXI.BaseTexture,\n\t\t         glTexture: PIXI.glCore.GLTexture) {\n\t\t\tconst gl = this.gl;\n\n\t\t\tif ((texture as any).isPowerOfTwo) {\n\t\t\t\tif (texture.mipmap) {\n\t\t\t\t\tglTexture.enableMipmap();\n\t\t\t\t}\n\n\t\t\t\tif (texture.wrapMode === PIXI.WRAP_MODES.CLAMP) {\n\t\t\t\t\tglTexture.enableWrapClamp();\n\t\t\t\t}\n\t\t\t\telse if (texture.wrapMode === PIXI.WRAP_MODES.REPEAT) {\n\t\t\t\t\tglTexture.enableWrapRepeat();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tglTexture.enableWrapMirrorRepeat();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tglTexture.enableWrapClamp();\n\t\t\t}\n\n\t\t\tif (texture.scaleMode === PIXI.SCALE_MODES.NEAREST) {\n\t\t\t\tglTexture.enableNearestScaling();\n\t\t\t}\n\t\t\telse {\n\t\t\t\tglTexture.enableLinearScaling();\n\t\t\t}\n\t\t}\n\n\t\tdestroy() {\n\t\t\tthis.renderer.off('context', this.onContextChange);\n\t\t}\n\t}\n\n\tPIXI.WebGLRenderer.registerPlugin('atlas', AtlasManager);\n}\n","declare module PIXI {\n\tinterface BaseTexture {\n\t\tuid: number;\n\t\t_updateID: number;\n\t\t_mips: Array<ImageData>;\n\t\tresource: pixi_heaven.ITextureResource\n\t\tforceUploadStyle: boolean;\n\n\t\tgenerateMips(levels: number): void;\n\t}\n\n\tinterface BaseRenderTexture {\n\t\tuid: number;\n\n\t\tgenerateMips(levels: number): void;\n\t}\n}\n\nmodule pixi_heaven {\n\tPIXI.BaseTexture.prototype._updateID = 0;\n\tPIXI.BaseTexture.prototype.resource = null;\n\tPIXI.BaseTexture.prototype.forceUploadStyle = true;\n\n\tlet tmpCanvas: HTMLCanvasElement;\n\n\tPIXI.BaseTexture.prototype.generateMips = function (levels: number) {\n\t\tif (!levels) return;\n\t\tlet src = this.source;\n\n\t\tif (!tmpCanvas) tmpCanvas = document.createElement(\"canvas\");\n\n\t\tlet sw = ((src.width + 1) >> 1) << 1;\n\t\tlet h = src.height;\n\t\tlet sh = 0;\n\t\tfor (let i = 1; i <= levels; i++) {\n\t\t\tsh += h;\n\t\t\th = (h + 1) >> 1;\n\t\t}\n\n\t\tif (tmpCanvas.width < sw) {\n\t\t\ttmpCanvas.width = sw;\n\t\t}\n\t\tif (tmpCanvas.height < sh) {\n\t\t\ttmpCanvas.height = sh;\n\t\t}\n\t\tlet context = tmpCanvas.getContext(\"2d\");\n\t\tcontext.clearRect(0, 0, sw, sh);\n\n\t\tthis._mips = [];\n\n\t\tlet w = src.width;\n\t\th = src.height;\n\t\tcontext.drawImage(src, 0, 0, w, h, 0, 0, w / 2, h / 2);\n\t\tlet h1 = 0;\n\t\tfor (let i = 1; i <= levels; i++) {\n\t\t\tw = (w + 1) >> 1;\n\t\t\th = (h + 1) >> 1;\n\t\t\tlet data = context.getImageData(0, h1, w, h);\n\t\t\tthis._mips.push({\n\t\t\t\twidth: data.width,\n\t\t\t\theight: data.height,\n\t\t\t\tdata: new Uint8Array(data.data)\n\t\t\t});\n\t\t\tif (i < levels) {\n\t\t\t\tcontext.drawImage(tmpCanvas, 0, h1, w, h, 0, h1 + h, w / 2, h / 2);\n\t\t\t\th1 += h;\n\t\t\t}\n\t\t}\n\t}\n}","declare module PIXI {\n    namespace GroupD8 {\n        export function isVertical(rotation: number): boolean;\n    }\n}\n\nif (!PIXI.GroupD8.isVertical) {\n    PIXI.GroupD8.isVertical = function(rotation: number) {\n        return (rotation & 3) === 2;\n    }\n}\n","declare module PIXI {\n\tinterface BaseTexture {\n\t\tuid: number;\n\t\t_updateID: number;\n\t\tresource: pixi_heaven.ITextureResource\n\t\tforceUploadStyle: boolean;\n\t}\n\n\tinterface BaseRenderTexture {\n\t\tuid: number;\n\t}\n}\n\ndeclare module PIXI.glCore {\n\tinterface GLTexture {\n\t\t_updateID: number;\n\t}\n}\n\nmodule pixi_heaven {\n\tPIXI.glCore.GLTexture.prototype._updateID = -1;\n\tPIXI.BaseTexture.prototype._updateID = 0;\n\tPIXI.BaseTexture.prototype.resource = null;\n\tPIXI.BaseTexture.prototype.forceUploadStyle = true;\n\n\tfunction bindTexture(texture: any,\n\t                     location?: number, forceLocation?: boolean): number {\n\t\ttexture = texture || this.emptyTextures[location];\n\t\ttexture = texture.baseTexture || texture;\n\t\ttexture.touched = this.textureGC.count;\n\n\t\tif (!forceLocation) {\n\t\t\t// TODO - maybe look into adding boundIds.. save us the loop?\n\t\t\tfor (let i = 0; i < this.boundTextures.length; i++) {\n\t\t\t\tif (this.boundTextures[i] === texture) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (location === undefined) {\n\t\t\t\tthis._nextTextureLocation++;\n\t\t\t\tthis._nextTextureLocation %= this.boundTextures.length;\n\t\t\t\tlocation = this.boundTextures.length - this._nextTextureLocation - 1;\n\t\t\t}\n\t\t}\n\t\telse {\n\t\t\tlocation = location || 0;\n\t\t}\n\n\t\tconst gl = this.gl;\n\t\tconst glTexture = texture._glTextures[this.CONTEXT_UID];\n\t\tif (texture === this.emptyTextures[location]) {\n\t\t\tglTexture._updateID = 0;\n\t\t}\n\n\t\tif (!glTexture || glTexture._updateID < texture._updateID) {\n\t\t\t// this will also bind the texture..\n\t\t\tthis.textureManager.updateTexture(texture, location);\n\t\t}\n\t\telse {\n\t\t\t// bind the current texture\n\t\t\tthis.boundTextures[location] = texture;\n\t\t\tgl.activeTexture(gl.TEXTURE0 + location);\n\t\t\tgl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n\t\t}\n\n\t\treturn location;\n\t}\n\n\tPIXI.WebGLRenderer.prototype.bindTexture = bindTexture;\n}\n","namespace pixi_heaven.mesh {\n\tconst tempPoint = new PIXI.Point();\n\tconst tempPolygon = new PIXI.Polygon();\n\n\t/**\n\t * Base mesh class\n\t * @class\n\t * @extends PIXI.Container\n\t * @memberof PIXI.mesh\n\t */\n\texport class Mesh extends PIXI.Container {\n\t\t/**\n\t\t * The texture of the Mesh\n\t\t *\n\t\t * @member {PIXI.Texture}\n\t\t * @private\n\t\t */\n\t\t_texture: PIXI.Texture;\n\n\t\t/**\n\t\t * The Uvs of the Mesh\n\t\t *\n\t\t * @member {Float32Array}\n\t\t */\n\t\tuvs: Float32Array;\n\n\t\t/**\n\t\t * An array of vertices\n\t\t *\n\t\t * @member {Float32Array}\n\t\t */\n\t\tvertices: Float32Array;\n\n\t\t/*\n\t\t * @member {Uint16Array} An array containing the indices of the vertices\n\t\t */\n\t\tindices: Uint16Array;\n\n\t\t/**\n\t\t * Two colors per vertex: dark, light. Please fill with 0x0 and 0xffffffff by default.\n\t\t *\n\t\t * @member {Uint32Array}\n\t\t */\n\t\tcolors: Uint32Array;\n\n\t\t/**\n\t\t * The way the Mesh should be drawn, can be any of the {@link PIXI.mesh.Mesh.DRAW_MODES} consts\n\t\t *\n\t\t * @member {number}\n\t\t * @see PIXI.mesh.Mesh.DRAW_MODES\n\t\t */\n\t\tdrawMode: number;\n\n\t\t/**\n\t\t * Version of mesh uvs are dirty or not\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tdirty = 0;\n\n\t\t/**\n\t\t * Version of mesh indices\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tindexDirty = 0;\n\n\t\t/**\n\t\t * The blend mode to be applied to the mesh. Set to `PIXI.BLEND_MODES.NORMAL` to remove\n\t\t * any blend mode.\n\t\t *\n\t\t * @member {number}\n\t\t * @default PIXI.BLEND_MODES.NORMAL\n\t\t * @see PIXI.BLEND_MODES\n\t\t */\n\t\tblendMode = PIXI.BLEND_MODES.NORMAL;\n\n\t\t/**\n\t\t * Triangles in canvas mode are automatically antialiased, use this value to force triangles\n\t\t * to overlap a bit with each other.\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tcanvasPadding = 0;\n\n\t\t/**\n\t\t * The tint applied to the mesh. This is a [r,g,b] value. A value of [1,1,1] will remove any\n\t\t * tint effect.\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\ttintRgb = new Float32Array([1, 1, 1]);\n\n\t\t/**\n\t\t * A map of renderer IDs to webgl render data\n\t\t *\n\t\t * @private\n\t\t * @member {object<number, object>}\n\t\t */\n\t\t_glDatas: { [key: number]: any } = {};\n\n\t\t/**\n\t\t * whether or not upload uvTransform to shader\n\t\t * if its false, then uvs should be pre-multiplied\n\t\t * if you change it for generated mesh, please call 'refresh(true)'\n\t\t * @member {boolean}\n\t\t * @default false\n\t\t */\n\t\tuploadUvTransform = false;\n\n\t\t/**\n\t\t * Plugin that is responsible for rendering this element.\n\t\t * Allows to customize the rendering process without overriding '_renderWebGL' & '_renderCanvas' methods.\n\t\t * @member {string}\n\t\t * @default 'mesh'\n\t\t */\n\t\tpluginName = settings.MESH_PLUGIN;\n\n\t\t/**\n\t\t * transform that is applied to UV to get the texture coords\n\t\t * its updated independently from texture uvTransform\n\t\t * updates of uvs are tied to that thing\n\t\t *\n\t\t * @member {PIXI.TextureMatrix}\n\t\t * @private\n\t\t */\n\t\t_uvTransform: PIXI.TextureMatrix;\n\n\t\t/**\n\t\t * Same as sprite vertexData\n\t\t */\n\t\tvertexData: Float32Array = null;\n\n\t\t/**\n\t\t * @param {PIXI.Texture} texture - The texture to use\n\t\t * @param {Float32Array} [vertices] - if you want to specify the vertices\n\t\t * @param {Float32Array} [uvs] - if you want to specify the uvs\n\t\t * @param {Uint16Array} [indices] - if you want to specify the indices\n\t\t * @param {number} [drawMode] - the drawMode, can be any of the Mesh.DRAW_MODES consts\n\t\t */\n\t\tconstructor(texture: PIXI.Texture = PIXI.Texture.EMPTY, vertices?: Float32Array, uvs?: Float32Array, indices?: Uint16Array,\n\t\t            drawMode: number = PIXI.mesh.Mesh.DRAW_MODES.TRIANGLE_MESH) {\n\t\t\tsuper();\n\t\t\tthis._texture = texture;\n\n\t\t\tif (!texture.baseTexture.hasLoaded) {\n\t\t\t\ttexture.once('update', this._onTextureUpdate, this);\n\t\t\t}\n\n\t\t\tthis.uvs = uvs || new Float32Array([\n\t\t\t\t0, 0,\n\t\t\t\t1, 0,\n\t\t\t\t1, 1,\n\t\t\t\t0, 1]);\n\n\t\t\tthis.vertices = vertices || new Float32Array([\n\t\t\t\t0, 0,\n\t\t\t\t100, 0,\n\t\t\t\t100, 100,\n\t\t\t\t0, 100]);\n\n\t\t\t//  TODO auto generate this based on draw mode!\n\t\t\tthis.indices = indices || new Uint16Array([0, 1, 3, 2]);\n\n\t\t\tthis.colors = null;\n\n\t\t\tthis.drawMode = drawMode;\n\n\t\t\t/**\n\t\t\t * transform that is applied to UV to get the texture coords\n\t\t\t * its updated independently from texture uvTransform\n\t\t\t * updates of uvs are tied to that thing\n\t\t\t *\n\t\t\t * @member {PIXI.TextureMatrix}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._uvTransform = new PIXI.TextureMatrix(texture, 0);\n\t\t}\n\n\t\t/**\n\t\t * Updates the object transform for rendering\n\t\t *\n\t\t * @private\n\t\t */\n\t\tupdateTransform() {\n\t\t\tthis.refresh();\n\n\t\t\t//TODO: move it somewhere, default heaven updateTransform\n\t\t\tthis._boundsID++;\n\n\t\t\tthis.transform.updateTransform(this.parent.transform);\n\n\t\t\tthis.worldAlpha = this.alpha * this.parent.worldAlpha;\n\t\t\tif (this.color) {\n\t\t\t\tthis.color.alpha = this.worldAlpha;\n\t\t\t\tthis.color.updateTransform();\n\t\t\t}\n\n\t\t\tfor (let i = 0, j = this.children.length; i < j; ++i) {\n\t\t\t\tconst child = this.children[i];\n\n\t\t\t\tif (child.visible) {\n\t\t\t\t\tchild.updateTransform();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Renders the object using the WebGL renderer\n\t\t *\n\t\t * @private\n\t\t * @param {PIXI.WebGLRenderer} renderer - a reference to the WebGL renderer\n\t\t */\n\t\t_renderWebGL(renderer: PIXI.WebGLRenderer) {\n\t\t\trenderer.setObjectRenderer(renderer.plugins[this.pluginName]);\n\t\t\trenderer.plugins[this.pluginName].render(this);\n\t\t}\n\n\t\t/**\n\t\t * Renders the object using the Canvas renderer\n\t\t *\n\t\t * @private\n\t\t * @param {PIXI.CanvasRenderer} renderer - The canvas renderer.\n\t\t */\n\t\t_renderCanvas(renderer: PIXI.CanvasRenderer) {\n\t\t\trenderer.plugins['mesh'].render(this);\n\t\t}\n\n\t\t/**\n\t\t * When the texture is updated, this event will fire to update the scale and frame\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_onTextureUpdate() {\n\t\t\tthis._uvTransform.texture = this._texture;\n\t\t\tthis.color.pma = this._texture.baseTexture.premultipliedAlpha;\n\t\t\tthis.refresh();\n\t\t}\n\n\t\t/**\n\t\t * multiplies uvs only if uploadUvTransform is false\n\t\t * call it after you change uvs manually\n\t\t * make sure that texture is valid\n\t\t */\n\t\tmultiplyUvs() {\n\t\t\tif (!this.uploadUvTransform) {\n\t\t\t\t(this._uvTransform as any).multiplyUvs(this.uvs);\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Refreshes uvs for generated meshes (rope, plane)\n\t\t * sometimes refreshes vertices too\n\t\t *\n\t\t * @param {boolean} [forceUpdate=false] if true, matrices will be updated any case\n\t\t */\n\t\trefresh(forceUpdate = false) {\n\t\t\tif (this._uvTransform.update(forceUpdate)) {\n\t\t\t\tthis._refreshUvs();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * re-calculates mesh coords\n\t\t * @protected\n\t\t */\n\t\t_refreshUvs() {\n\t\t\t/* empty */\n\t\t}\n\n\t\t/**\n\t\t * Returns the bounds of the mesh as a rectangle. The bounds calculation takes the worldTransform into account.\n\t\t *\n\t\t */\n\t\t_calculateBounds() {\n\t\t\t// TODO - we can cache local bounds and use them if they are dirty (like graphics)\n\t\t\tthis._bounds.addVertices(this.transform as any, this.vertices as any, 0, this.vertices.length);\n\t\t}\n\n\t\t/**\n\t\t * Tests if a point is inside this mesh. Works only for TRIANGLE_MESH\n\t\t *\n\t\t * @param {PIXI.Point} point - the point to test\n\t\t * @return {boolean} the result of the test\n\t\t */\n\t\tcontainsPoint(point: PIXI.PointLike) {\n\t\t\tif (!this.getBounds().contains(point.x, point.y)) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tthis.worldTransform.applyInverse(point as any, tempPoint);\n\n\t\t\tconst vertices = this.vertices;\n\t\t\tconst points = tempPolygon.points;\n\t\t\tconst indices = this.indices;\n\t\t\tconst len = this.indices.length;\n\t\t\tconst step = this.drawMode === Mesh.DRAW_MODES.TRIANGLES ? 3 : 1;\n\n\t\t\tfor (let i = 0; i + 2 < len; i += step) {\n\t\t\t\tconst ind0 = indices[i] * 2;\n\t\t\t\tconst ind1 = indices[i + 1] * 2;\n\t\t\t\tconst ind2 = indices[i + 2] * 2;\n\n\t\t\t\tpoints[0] = vertices[ind0];\n\t\t\t\tpoints[1] = vertices[ind0 + 1];\n\t\t\t\tpoints[2] = vertices[ind1];\n\t\t\t\tpoints[3] = vertices[ind1 + 1];\n\t\t\t\tpoints[4] = vertices[ind2];\n\t\t\t\tpoints[5] = vertices[ind2 + 1];\n\n\t\t\t\tif (tempPolygon.contains(tempPoint.x, tempPoint.y)) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn false;\n\t\t}\n\n\t\tcalculateVertices() {\n\t\t\tconst vertices = this.vertices;\n\t\t\tconst n = vertices.length;\n\n\t\t\tif (!this.vertexData || this.vertexData.length !== n)\n\t\t\t{\n\t\t\t\tthis.vertexData = new Float32Array(n);\n\t\t\t}\n\n\t\t\tconst vertexData = this.vertexData;\n\n\t\t\tconst matrix = this.transform.worldTransform;\n\t\t\tconst a = matrix.a;\n\t\t\tconst b = matrix.b;\n\t\t\tconst c = matrix.c;\n\t\t\tconst d = matrix.d;\n\t\t\tconst tx = matrix.tx;\n\t\t\tconst ty = matrix.ty;\n\n\t\t\tfor (let i = 0; i < n; i += 2)\n\t\t\t{\n\t\t\t\tconst rawX = vertices[i];\n\t\t\t\tconst rawY = vertices[i + 1];\n\t\t\t\tvertexData[i] = (a * rawX) + (c * rawY) + tx;\n\t\t\t\tvertexData[i+1] = (d * rawY) + (b * rawX) + ty;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * The texture that the mesh uses.\n\t\t *\n\t\t * @member {PIXI.Texture}\n\t\t */\n\t\tget texture() {\n\t\t\treturn this._texture;\n\t\t}\n\n\t\tset texture(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._texture === value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._texture = value;\n\n\t\t\tif (value) {\n\t\t\t\t// wait for the texture to load\n\t\t\t\tif (value.baseTexture.hasLoaded) {\n\t\t\t\t\tthis._onTextureUpdate();\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tvalue.once('update', this._onTextureUpdate, this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tenableColors() {\n\t\t\tthis.pluginName = 'meshColored';\n\n\t\t\tconst len = this.vertices.length / 2;\n\t\t\tconst colors = new Uint32Array(len * 2);\n\n\t\t\tthis.colors = colors;\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tthis.colors[i * 2] = 0;\n\t\t\t\tthis.colors[i * 2 + 1] = 0xffffffff;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * @param {Float32Array} rgb 3 * len numbers, RGB colors of mesh\n\t\t * @param {boolean} dark whether its dark or light tint\n\t\t */\n\t\tsetRGB(rgb: Float32Array, dark: boolean) {\n\t\t\tconst colors = this.colors;\n\n\t\t\tlet j = dark ? 0 : 1;\n\t\t\tlet a = dark ? 0 : (0xff << 24);\n\t\t\tfor (let i = 0; i < rgb.length; i += 3) {\n\t\t\t\tcolors[j] = a | ((rgb[i] * 255) << 16) | ((rgb[i+1] * 255) << 8) | ((rgb[i+2] * 255) << 0);\n\t\t\t\tj+=2;\n\t\t\t}\n\n\t\t\tthis.dirty++;\n\t\t}\n\n\t\tcolor = new ColorTransform();\n\n\t\t/**\n\t\t * The tint applied to the mesh. This is a hex value. A value of 0xFFFFFF will remove any tint effect.\n\t\t *\n\t\t * @member {number}\n\t\t * @default 0xFFFFFF\n\t\t */\n\t\tget tint() {\n\t\t\treturn this.color ? this.color.tintBGR : 0xffffff;\n\t\t}\n\n\t\tset tint(value: number) {\n\t\t\tthis.color && (this.color.tintBGR = value);\n\t\t}\n\n\t\tstatic DRAW_MODES = PIXI.mesh.Mesh.DRAW_MODES;\n\t}\n}\n","namespace pixi_heaven.mesh {\n\timport GroupD8 = PIXI.GroupD8;\n\n\t/**\n\t * The Plane allows you to draw a texture across several points and them manipulate these points\n\t *\n\t *```js\n\t * for (let i = 0; i < 20; i++) {\n *     points.push(new PIXI.Point(i * 50, 0));\n * };\n\t * let Plane = new PIXI.Plane(PIXI.Texture.fromImage(\"snake.png\"), points);\n\t *  ```\n\t *\n\t * @class\n\t * @extends PIXI.mesh.Mesh\n\t * @memberof PIXI.mesh\n\t *\n\t */\n\texport class Plane extends Mesh {\n\t\t_verticesX: number;\n\t\t_verticesY: number;\n\t\t_direction: number;\n\t\t_lastWidth: number;\n\t\t_lastHeight: number;\n\t\t_width: number;\n\t\t_height: number;\n\n\t\t/**\n\t\t *  Version counter for verticesX/verticesY change\n\t\t *\n\t\t * @member {number}\n\t\t * @private\n\t\t */\n\t\t_dimensionsID = 0;\n\n\t\t_lastDimensionsID = -1;\n\n\t\t/**\n\t\t *  Version counter for vertices updates\n\t\t *\n\t\t * @member {number}\n\t\t * @private\n\t\t */\n\t\t_verticesID = 0;\n\n\t\t_lastVerticesID = -1;\n\n\t\t/**\n\t\t *  Version counter for uvs updates\n\t\t *\n\t\t * @member {number}\n\t\t * @private\n\t\t */\n\t\t_uvsID = 0;\n\n\t\t_lastUvsID = -1;\n\n\t\t_anchor: PIXI.ObservablePoint;\n\n\t\t/**\n\t\t * reset the points on dimensions change\n\t\t * @member {boolean}\n\t\t * @default true\n\t\t */\n\t\tautoResetVertices = true;\n\n\t\tcalculatedVertices: Float32Array = null;\n\n\t\t/**\n\t\t * @param {PIXI.Texture} texture - The texture to use on the Plane.\n\t\t * @param {number} [verticesX=2] - The number of vertices in the x-axis\n\t\t * @param {number} [verticesY=2] - The number of vertices in the y-axis\n\t\t * @param {number} [direction=0] - Direction of the mesh. See {@link PIXI.GroupD8} for explanation\n\t\t */\n\t\tconstructor(texture: PIXI.Texture, verticesX: number = 2, verticesY: number = 2, direction = 0) {\n\t\t\tsuper(texture);\n\n\t\t\tthis._verticesX = verticesX || 2;\n\t\t\tthis._verticesY = verticesY || 2;\n\n\t\t\tthis._direction = (direction || 0) & (~1);\n\n\t\t\tthis._lastWidth = texture.orig.width;\n\t\t\tthis._lastHeight = texture.orig.height;\n\n\t\t\tthis._width = 0;\n\t\t\tthis._height = 0;\n\n\t\t\t/**\n\t\t\t * anchor for a plane\n\t\t\t *\n\t\t\t * @member {PIXI.ObservablePoint}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._anchor = new PIXI.ObservablePoint(this._onAnchorUpdate, this);\n\n\t\t\tthis.drawMode = Mesh.DRAW_MODES.TRIANGLES;\n\n\t\t\tthis.refresh();\n\t\t}\n\n\t\t/**\n\t\t * The width of the sprite, setting this will actually modify the scale to achieve the value set\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget verticesX() {\n\t\t\treturn this._verticesX;\n\t\t}\n\n\t\tset verticesX(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._verticesX === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._verticesX = value;\n\t\t\tthis._dimensionsID++;\n\t\t}\n\n\t\t/**\n\t\t * The height of the TilingSprite, setting this will actually modify the scale to achieve the value set\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget verticesY() {\n\t\t\treturn this._verticesY;\n\t\t}\n\n\t\tset verticesY(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._verticesY === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._verticesY = value;\n\t\t\tthis._dimensionsID++;\n\t\t}\n\n\t\t/**\n\t\t * Direction of the mesh, see {@link PIXI.GroupD8} for explanation\n\t\t *\n\t\t * @param {number} [direction=0] - Direction of the mesh.\n\t\t */\n\t\tget direction() {\n\t\t\treturn this._direction;\n\t\t}\n\n\t\tset direction(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (value % 2 !== 0) {\n\t\t\t\tthrow new Error('plane does not support diamond shape yet');\n\t\t\t}\n\n\t\t\tif (this._direction === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._direction = value;\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * The width of the Plane, settings this wont modify the scale, but vertices will be cleared\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget width() {\n\t\t\treturn this._width || this.texture.orig.width;\n\t\t}\n\n\t\tset width(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._width === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._width = value;\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * The height of the Plane, settings this wont modify the scale, but vertices will be cleared\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget height() {\n\t\t\treturn this._height || this.texture.orig.height;\n\t\t}\n\n\t\tset height(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._height === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._height = value;\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * The anchor sets the origin point of the texture.\n\t\t * The default is 0,0 this means the texture's origin is the top left\n\t\t * Setting the anchor to 0.5,0.5 means the texture's origin is centered\n\t\t * Setting the anchor to 1,1 would mean the texture's origin point will be the bottom right corner\n\t\t *\n\t\t * @member {PIXI.ObservablePoint}\n\t\t */\n\t\tget anchor() {\n\t\t\treturn this._anchor;\n\t\t}\n\n\t\tset anchor(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tthis._anchor.copy(value);\n\t\t}\n\n\t\t/**\n\t\t * updates vertices after anchor changes\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_onAnchorUpdate() {\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * Call when you updated some parameters manually\n\t\t */\n\t\tinvalidateVertices() {\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * Call when you updated some parameters manually\n\t\t */\n\t\tinvalidateUvs() {\n\t\t\tthis._uvsID++;\n\t\t}\n\n\t\t/**\n\t\t * Call when you updated some parameters manually\n\t\t */\n\t\tinvalidate() {\n\t\t\tthis._verticesID++;\n\t\t\tthis._uvsID++;\n\t\t}\n\n\t\t/**\n\t\t * Refreshes the plane mesh\n\t\t *\n\t\t * @param {boolean} [forceUpdate=false] if true, everything will be updated in any case\n\t\t */\n\t\trefresh(forceUpdate = false) {\n\t\t\tthis.refreshDimensions(forceUpdate);\n\n\t\t\tif (this._texture.noFrame) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._lastWidth !== this.width\n\t\t\t\t|| this._lastHeight !== this.height) {\n\t\t\t\tthis._lastWidth = this.width;\n\t\t\t\tthis._lastHeight = this.height;\n\t\t\t\tif (this.autoResetVertices) {\n\t\t\t\t\tthis._verticesID++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._uvTransform.update(forceUpdate)) {\n\t\t\t\tthis._uvsID++;\n\t\t\t}\n\n\t\t\tif (this._uvsID !== this._lastUvsID) {\n\t\t\t\tthis._refreshUvs();\n\t\t\t}\n\n\t\t\tthis.refreshVertices();\n\t\t}\n\n\t\t/**\n\t\t * Refreshes structure of the plane mesh\n\t\t * when its done, refreshes vertices and uvs too\n\t\t *\n\t\t * @param {boolean} [forceUpdate=false] if true, dimensions will be updated any case\n\t\t */\n\t\trefreshDimensions(forceUpdate = false) {\n\t\t\t// won't be overwritten, that's why there's no private method\n\n\t\t\tif (!forceUpdate && this._lastDimensionsID === this._dimensionsID) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._lastDimensionsID = this._dimensionsID;\n\t\t\tthis._verticesID++;\n\t\t\tthis._uvsID++;\n\n\t\t\tconst total = this._verticesX * this._verticesY;\n\n\t\t\tconst segmentsX = this._verticesX - 1;\n\t\t\tconst segmentsY = this._verticesY - 1;\n\n\t\t\tconst indices = [];\n\t\t\tconst totalSub = segmentsX * segmentsY;\n\n\t\t\tfor (let i = 0; i < totalSub; i++) {\n\t\t\t\tconst xpos = i % segmentsX;\n\t\t\t\tconst ypos = (i / segmentsX) | 0;\n\n\t\t\t\tconst value = (ypos * this._verticesX) + xpos;\n\t\t\t\tconst value2 = (ypos * this._verticesX) + xpos + 1;\n\t\t\t\tconst value3 = ((ypos + 1) * this._verticesX) + xpos;\n\t\t\t\tconst value4 = ((ypos + 1) * this._verticesX) + xpos + 1;\n\n\t\t\t\tindices.push(value, value2, value3);\n\t\t\t\tindices.push(value2, value4, value3);\n\t\t\t}\n\t\t\tthis.indices = new Uint16Array(indices);\n\t\t\tthis.uvs = new Float32Array(total * 2);\n\t\t\tthis.vertices = new Float32Array(total * 2);\n\t\t\tthis.calculatedVertices = new Float32Array(total * 2);\n\n\t\t\tthis.indexDirty++;\n\t\t\tif (this.colors) {\n\t\t\t\tthis.colors = new Uint32Array(total * 2);\n\t\t\t\tfor (let i = 0; i < total; i++) {\n\t\t\t\t\tthis.colors[i * 2] = 0;\n\t\t\t\t\tthis.colors[i * 2 + 1] = 0xffffffff;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Refreshes plane vertices coords\n\t\t * by default, makes them uniformly distributed\n\t\t *\n\t\t * @param {boolean} [forceUpdate=false] if true, vertices will be updated any case\n\t\t */\n\t\trefreshVertices(forceUpdate = false) {\n\t\t\tconst texture = this._texture;\n\n\t\t\tif (texture.noFrame) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (forceUpdate || this._lastVerticesID !== this._verticesID) {\n\t\t\t\tthis._lastVerticesID = this._verticesID;\n\t\t\t\tthis._refreshVertices();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Refreshes plane UV coordinates\n\t\t *\n\t\t */\n\t\t_refreshUvs() {\n\t\t\tthis._uvsID = this._lastUvsID;\n\n\t\t\tconst total = this._verticesX * this._verticesY;\n\t\t\tconst uvs = this.uvs;\n\n\t\t\tconst direction = this._direction;\n\n\t\t\tconst ux = GroupD8.uX(direction);\n\t\t\tconst uy = GroupD8.uY(direction);\n\t\t\tconst vx = GroupD8.vX(direction);\n\t\t\tconst vy = GroupD8.vY(direction);\n\n\t\t\tconst factorU = 1.0 / (this._verticesX - 1);\n\t\t\tconst factorV = 1.0 / (this._verticesY - 1);\n\n\t\t\tfor (let i = 0; i < total; i++) {\n\t\t\t\tlet x = (i % this._verticesX);\n\t\t\t\tlet y = ((i / this._verticesX) | 0);\n\n\t\t\t\tx = (x * factorU) - 0.5;\n\t\t\t\ty = (y * factorV) - 0.5;\n\n\t\t\t\tuvs[i * 2] = (ux * x) + (vx * y) + 0.5;\n\t\t\t\tuvs[(i * 2) + 1] = (uy * x) + (vy * y) + 0.5;\n\t\t\t}\n\n\t\t\tthis.dirty++;\n\n\t\t\tthis.multiplyUvs();\n\t\t}\n\n\t\t/**\n\t\t * calculates supposed position of vertices\n\t\t */\n\t\tcalcVertices() {\n\t\t\tconst total = this._verticesX * this._verticesY;\n\t\t\tconst vertices = this.calculatedVertices;\n\n\t\t\tconst width = this.width;\n\t\t\tconst height = this.height;\n\t\t\tconst direction = this._direction;\n\n\t\t\tlet ux = GroupD8.uX(direction);\n\t\t\tlet uy = GroupD8.uY(direction);\n\t\t\tlet vx = GroupD8.vX(direction);\n\t\t\tlet vy = GroupD8.vY(direction);\n\n\t\t\tconst anchor = this._anchor as any;\n\t\t\tconst offsetX = (0.5 * (1 - (ux + vx))) - anchor._x;\n\t\t\tconst offsetY = (0.5 * (1 - (uy + vy))) - anchor._y;\n\t\t\tconst factorU = 1.0 / (this._verticesX - 1);\n\t\t\tconst factorV = 1.0 / (this._verticesY - 1);\n\n\t\t\tux *= factorU;\n\t\t\tuy *= factorU;\n\t\t\tvx *= factorV;\n\t\t\tvy *= factorV;\n\n\t\t\tfor (let i = 0; i < total; i++) {\n\t\t\t\tconst x = (i % this._verticesX);\n\t\t\t\tconst y = ((i / this._verticesX) | 0);\n\n\t\t\t\tvertices[i * 2] = ((ux * x) + (vx * y) + offsetX) * width;\n\t\t\t\tvertices[(i * 2) + 1] = ((uy * x) + (vy * y) + offsetY) * height;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * calculates colors (if enabled)\n\t\t */\n\t\tcalcColors() {\n\t\t\t/* nothing */\n\t\t}\n\n\t\t/**\n\t\t * Refreshes vertices of Plane mesh\n\t\t * by default, makes them uniformly distributed\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_refreshVertices() {\n\t\t\tthis.calcVertices();\n\n\t\t\tconst vertices = this.vertices;\n\t\t\tconst calculatedVertices = this.calculatedVertices;\n\t\t\tconst len = vertices.length;\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tvertices[i] = calculatedVertices[i];\n\t\t\t}\n\n\t\t\tif (this.colors) {\n\t\t\t\tthis.calcColors();\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * resets everything to defaults\n\t\t */\n\t\treset() {\n\t\t\tif (!this.texture.noFrame) {\n\t\t\t\tthis._refreshUvs();\n\t\t\t\tthis.refreshVertices(true);\n\t\t\t}\n\t\t}\n\t}\n}\n","namespace pixi_heaven.mesh {\n\n\tconst DEFAULT_BORDER_SIZE = 10;\n\n\t/**\n\t * The NineSlicePlane allows you to stretch a texture using 9-slice scaling. The corners will remain unscaled (useful\n\t * for buttons with rounded corners for example) and the other areas will be scaled horizontally and or vertically\n\t *\n\t *```js\n\t * let Plane9 = new PIXI.NineSlicePlane(PIXI.Texture.fromImage('BoxWithRoundedCorners.png'), 15, 15, 15, 15);\n\t *  ```\n\t * <pre>\n\t *      A                          B\n\t *    +---+----------------------+---+\n\t *  C | 1 |          2           | 3 |\n\t *    +---+----------------------+---+\n\t *    |   |                      |   |\n\t *    | 4 |          5           | 6 |\n\t *    |   |                      |   |\n\t *    +---+----------------------+---+\n\t *  D | 7 |          8           | 9 |\n\t *    +---+----------------------+---+\n\n\t *  When changing this objects width and/or height:\n\t *     areas 1 3 7 and 9 will remain unscaled.\n\t *     areas 2 and 8 will be stretched horizontally\n\t *     areas 4 and 6 will be stretched vertically\n\t *     area 5 will be stretched both horizontally and vertically\n\t * </pre>\n\t *\n\t * @class\n\t * @extends PIXI.mesh.Plane\n\t * @memberof PIXI.mesh\n\t *\n\t */\n\texport class NineSlicePlane extends Plane {\n\t\t/**\n\t\t * The width of the left column (a)\n\t\t *\n\t\t * @member {number}\n\t\t * @memberof PIXI.NineSlicePlane#\n\t\t * @override\n\t\t */\n\t\t_leftWidth: number;\n\n\t\t/**\n\t\t * The width of the right column (b)\n\t\t *\n\t\t * @member {number}\n\t\t * @memberof PIXI.NineSlicePlane#\n\t\t * @override\n\t\t */\n\t\t_rightWidth: number;\n\n\t\t/**\n\t\t * The height of the top row (c)\n\t\t *\n\t\t * @member {number}\n\t\t * @memberof PIXI.NineSlicePlane#\n\t\t * @override\n\t\t */\n\t\t_topHeight: number;\n\n\t\t/**\n\t\t * The height of the bottom row (d)\n\t\t *\n\t\t * @member {number}\n\t\t * @memberof PIXI.NineSlicePlane#\n\t\t * @override\n\t\t */\n\t\t_bottomHeight: number;\n\n\t\t/**\n\t\t * @param {PIXI.Texture} texture - The texture to use on the NineSlicePlane.\n\t\t * @param {int} [leftWidth=10] size of the left vertical bar (A)\n\t\t * @param {int} [topHeight=10] size of the top horizontal bar (C)\n\t\t * @param {int} [rightWidth=10] size of the right vertical bar (B)\n\t\t * @param {int} [bottomHeight=10] size of the bottom horizontal bar (D)\n\t\t */\n\t\tconstructor(texture: PIXI.Texture, leftWidth = DEFAULT_BORDER_SIZE, topHeight = DEFAULT_BORDER_SIZE,\n\t\t            rightWidth = DEFAULT_BORDER_SIZE, bottomHeight = DEFAULT_BORDER_SIZE) {\n\t\t\tsuper(texture, 4, 4);\n\n\n\t\t\tthis._leftWidth = leftWidth;\n\n\t\t\t/**\n\t\t\t * The width of the right column (b)\n\t\t\t *\n\t\t\t * @member {number}\n\t\t\t * @memberof PIXI.NineSlicePlane#\n\t\t\t * @override\n\t\t\t */\n\t\t\tthis._rightWidth = rightWidth;\n\n\t\t\t/**\n\t\t\t * The height of the top row (c)\n\t\t\t *\n\t\t\t * @member {number}\n\t\t\t * @memberof PIXI.NineSlicePlane#\n\t\t\t * @override\n\t\t\t */\n\t\t\tthis._topHeight = topHeight;\n\n\t\t\t/**\n\t\t\t * The height of the bottom row (d)\n\t\t\t *\n\t\t\t * @member {number}\n\t\t\t * @memberof PIXI.NineSlicePlane#\n\t\t\t * @override\n\t\t\t */\n\t\t\tthis._bottomHeight = bottomHeight;\n\n\t\t\tthis.refresh(true);\n\t\t}\n\n\t\t/**\n\t\t * The width of the left column\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget leftWidth() {\n\t\t\treturn this._leftWidth;\n\t\t}\n\n\t\tset leftWidth(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._leftWidth === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._leftWidth = value;\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * The width of the right column\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget rightWidth() {\n\t\t\treturn this._rightWidth;\n\t\t}\n\n\t\tset rightWidth(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._rightWidth === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._rightWidth = value;\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * The height of the top row\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget topHeight() {\n\t\t\treturn this._topHeight;\n\t\t}\n\n\t\tset topHeight(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._topHeight === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._topHeight = value;\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * The height of the bottom row\n\t\t *\n\t\t * @member {number}\n\t\t */\n\t\tget bottomHeight() {\n\t\t\treturn this._bottomHeight;\n\t\t}\n\n\t\tset bottomHeight(value) // eslint-disable-line require-jsdoc\n\t\t{\n\t\t\tif (this._bottomHeight === value) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._bottomHeight = value;\n\t\t\tthis._verticesID++;\n\t\t}\n\n\t\t/**\n\t\t * refreshes both vertices and uvs\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_refreshVertices() {\n\t\t\tthis.updateHorizontalVertices();\n\t\t\tthis.updateVerticalVertices();\n\n\t\t\tconst vertices = this.vertices;\n\t\t\tconst anchor = this._anchor as any;\n\t\t\tconst offsetX = anchor._x * this.width;\n\t\t\tconst offsetY = anchor._y * this.height;\n\n\t\t\tfor (let i = 0; i < 32; i += 2) {\n\t\t\t\tvertices[i] += offsetX;\n\t\t\t\tvertices[i + 1] += offsetY;\n\t\t\t}\n\t\t\tthis.dirty++;\n\t\t}\n\n\t\t/**\n\t\t * does nothing\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_refreshUvs() {\n\t\t\tthis._uvsID = this._lastUvsID;\n\n\t\t\tconst uvs = this.uvs;\n\t\t\tconst texture = this._texture;\n\t\t\tconst width = texture.orig.width;\n\t\t\tconst height = texture.orig.height;\n\n\t\t\tuvs[0] = uvs[8] = uvs[16] = uvs[24] = 0;\n\t\t\tuvs[2] = uvs[10] = uvs[18] = uvs[26] = this._leftWidth / width;\n\t\t\tuvs[4] = uvs[12] = uvs[20] = uvs[28] = 1 - (this._rightWidth / width);\n\t\t\tuvs[6] = uvs[14] = uvs[22] = uvs[30] = 1;\n\n\t\t\tuvs[1] = uvs[3] = uvs[5] = uvs[7] = 0;\n\t\t\tuvs[9] = uvs[11] = uvs[13] = uvs[15] = this._topHeight / height;\n\t\t\tuvs[17] = uvs[19] = uvs[21] = uvs[23] = 1 - (this._bottomHeight / height);\n\t\t\tuvs[25] = uvs[27] = uvs[29] = uvs[31] = 1;\n\n\t\t\tthis.dirty++;\n\n\t\t\tthis.multiplyUvs();\n\t\t}\n\n\t\t/**\n\t\t * Updates the horizontal vertices.\n\t\t */\n\t\tupdateHorizontalVertices() {\n\t\t\tconst vertices = this.vertices;\n\n\t\t\tvertices[1] = vertices[3] = vertices[5] = vertices[7] = 0;\n\t\t\tvertices[9] = vertices[11] = vertices[13] = vertices[15] = this._topHeight;\n\t\t\tvertices[17] = vertices[19] = vertices[21] = vertices[23] = this._height - this._bottomHeight;\n\t\t\tvertices[25] = vertices[27] = vertices[29] = vertices[31] = this._height;\n\t\t}\n\n\t\t/**\n\t\t * Updates the vertical vertices.\n\t\t *\n\t\t */\n\t\tupdateVerticalVertices() {\n\t\t\tconst vertices = this.vertices;\n\n\t\t\tvertices[0] = vertices[8] = vertices[16] = vertices[24] = 0;\n\t\t\tvertices[2] = vertices[10] = vertices[18] = vertices[26] = this._leftWidth;\n\t\t\tvertices[4] = vertices[12] = vertices[20] = vertices[28] = this._width - this._rightWidth;\n\t\t\tvertices[6] = vertices[14] = vertices[22] = vertices[30] = this._width;\n\t\t}\n\n\t\t/**\n\t\t * Renders the object using the Canvas renderer\n\t\t *\n\t\t * @private\n\t\t * @param {PIXI.CanvasRenderer} renderer - The canvas renderer to render with.\n\t\t */\n\t\t_renderCanvas(renderer: PIXI.CanvasRenderer) {\n\t\t\t// no texture - no drawImage\n\t\t\tif (!this._texture.valid) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// advanced rendering - allow texture rotates\n\t\t\tif (this._texture.rotate) {\n\t\t\t\tsuper._renderCanvas(renderer);\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst context = renderer.context;\n\n\t\t\tcontext.globalAlpha = this.worldAlpha;\n\n\t\t\tconst transform = this.worldTransform;\n\t\t\tconst res = renderer.resolution;\n\n\t\t\tif (renderer.roundPixels) {\n\t\t\t\tcontext.setTransform(\n\t\t\t\t\ttransform.a * res,\n\t\t\t\t\ttransform.b * res,\n\t\t\t\t\ttransform.c * res,\n\t\t\t\t\ttransform.d * res,\n\t\t\t\t\t(transform.tx * res) | 0,\n\t\t\t\t\t(transform.ty * res) | 0\n\t\t\t\t);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tcontext.setTransform(\n\t\t\t\t\ttransform.a * res,\n\t\t\t\t\ttransform.b * res,\n\t\t\t\t\ttransform.c * res,\n\t\t\t\t\ttransform.d * res,\n\t\t\t\t\ttransform.tx * res,\n\t\t\t\t\ttransform.ty * res\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tconst base = this._texture.baseTexture;\n\t\t\tconst textureSource = base.source;\n\t\t\tconst w = base.realWidth;\n\t\t\tconst h = base.realHeight;\n\n\t\t\tthis.drawSegment(context, textureSource, w, h, 0, 1, 10, 11);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 2, 3, 12, 13);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 4, 5, 14, 15);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 8, 9, 18, 19);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 10, 11, 20, 21);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 12, 13, 22, 23);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 16, 17, 26, 27);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 18, 19, 28, 29);\n\t\t\tthis.drawSegment(context, textureSource, w, h, 20, 21, 30, 31);\n\t\t}\n\n\t\t/**\n\t\t * Renders one segment of the plane.\n\t\t * to mimic the exact drawing behavior of stretching the image like WebGL does, we need to make sure\n\t\t * that the source area is at least 1 pixel in size, otherwise nothing gets drawn when a slice size of 0 is used.\n\t\t *\n\t\t * @private\n\t\t * @param {CanvasRenderingContext2D} context - The context to draw with.\n\t\t * @param {CanvasImageSource} textureSource - The source to draw.\n\t\t * @param {number} w - width of the texture\n\t\t * @param {number} h - height of the texture\n\t\t * @param {number} x1 - x index 1\n\t\t * @param {number} y1 - y index 1\n\t\t * @param {number} x2 - x index 2\n\t\t * @param {number} y2 - y index 2\n\t\t */\n\t\tdrawSegment(context: CanvasRenderingContext2D, textureSource: HTMLImageElement | HTMLCanvasElement | HTMLVideoElement,\n\t\t            w: number, h: number, x1: number, y1: number, x2: number, y2: number) {\n\t\t\t// otherwise you get weird results when using slices of that are 0 wide or high.\n\t\t\tconst uvs = this.uvs;\n\t\t\tconst vertices = this.vertices;\n\n\t\t\tlet sw = (uvs[x2] - uvs[x1]) * w;\n\t\t\tlet sh = (uvs[y2] - uvs[y1]) * h;\n\t\t\tlet dw = vertices[x2] - vertices[x1];\n\t\t\tlet dh = vertices[y2] - vertices[y1];\n\n\t\t\t// make sure the source is at least 1 pixel wide and high, otherwise nothing will be drawn.\n\t\t\tif (sw < 1) {\n\t\t\t\tsw = 1;\n\t\t\t}\n\n\t\t\tif (sh < 1) {\n\t\t\t\tsh = 1;\n\t\t\t}\n\n\t\t\t// make sure destination is at least 1 pixel wide and high, otherwise you get\n\t\t\t// lines when rendering close to original size.\n\t\t\tif (dw < 1) {\n\t\t\t\tdw = 1;\n\t\t\t}\n\n\t\t\tif (dh < 1) {\n\t\t\t\tdh = 1;\n\t\t\t}\n\n\t\t\tcontext.drawImage(textureSource, uvs[x1] * w, uvs[y1] * h, sw, sh, vertices[x1], vertices[y1], dw, dh);\n\t\t}\n\t}\n}\n","namespace pixi_heaven.mesh {\n\timport GroupD8 = PIXI.GroupD8;\n\n\t/**\n\t * The rope sprite allows you to hack a rope that behaves like a sprite\n\t *\n\t * ```\n\t * let rope = new PIXI.mesh.Rope(PIXI.Texture.fromImage(\"snake.png\"), 5, 2, vertical ? 2 : 0);\n\t * rope.anchor.set(0.5, 0.5);\n\t * rope.clearPoints(); // set them according to anchor\n\t * rope.points[1].y = 15; // middle Y goes down\n\t * rope.points[2].offset = 15; // shift is better\n\t * rope.points[3].scale = 1.2; // scale a bit\n\t * ```\n\t *\n\t * @class\n\t * @extends PIXI.mesh.Rope\n\t * @memberof PIXI.mesh\n\t *\n\t */\n\texport class Rope extends Plane {\n\n\t\tpoints: Array<RopePoint> = [];\n\t\tcalculatedPoints: Array<RopePoint> = [];\n\n\t\t/**\n\t\t * invalidates points on every updateTransform\n\t\t * @member {boolean}\n\t\t * @default true\n\t\t */\n\t\tautoUpdate = true;\n\n\t\t/**\n\t\t * @param {PIXI.Texture} texture - The texture to use on the rope.\n\t\t * @param {number|PIXI.mesh.RopePoint[]} [verticesX=2] - How many vertices on diameter of the rope,\n\t\t * you can also pass pre-created points here.\n\t\t * @param {number} [verticesY=2] - How many vertices on meridian of the rope, make it 2 or 3\n\t\t * @param {number} [direction=0] - Direction of the rope. See {@link PIXI.GroupD8} for explanation\n\t\t */\n\t\tconstructor(texture: PIXI.Texture, verticesX: Array<RopePoint> | number, verticesY: number = 2, direction = 0) {\n\t\t\tsuper(texture, (verticesX as any).length || verticesX, verticesY, direction);\n\n\t\t\t/*\n\t\t\t * @member {PIXI.mesh.RopePoint[]} An array of points that determine the rope\n\t\t\t */\n\t\t\tthis.points = [];\n\t\t\t/*\n\t\t\t * @member {PIXI.mesh.RopePoint[]} Generated points positions, useful as starting position for points\n\t\t\t */\n\t\t\tthis.calculatedPoints = [];\n\n\t\t\tif (verticesX instanceof Array) {\n\t\t\t\tthis.points = verticesX;\n\t\t\t\tthis.autoResetVertices = false;\n\t\t\t}\n\n\t\t\tthis._checkPointsLen();\n\n\t\t\tif ((GroupD8 as any).isVertical(direction)) {\n\t\t\t\t(this._anchor as any)._x = 0.5;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t(this._anchor as any)._y = 0.5;\n\t\t\t}\n\n\t\t\tthis.refresh();\n\t\t}\n\n\t\t/**\n\t\t * Updates the object transform for rendering\n\t\t */\n\t\tupdateTransform() {\n\t\t\tif (this.autoUpdate) {\n\t\t\t\tthis._verticesID++;\n\t\t\t}\n\t\t\tthis.refresh();\n\t\t\tthis.containerUpdateTransform();\n\t\t}\n\n\t\t/**\n\t\t * updates everything when anchor was changed\n\t\t *\n\t\t * @private\n\t\t */\n\t\t_onAnchorUpdate() {\n\t\t\tthis.reset();\n\t\t}\n\n\t\t/**\n\t\t * sets default points coordinates\n\t\t *\n\t\t */\n\t\t_checkPointsLen() {\n\t\t\tconst len = this._verticesX;\n\t\t\tconst points = this.points;\n\t\t\tconst calculatedPoints = this.calculatedPoints;\n\n\t\t\tif (points.length > len) {\n\t\t\t\tpoints.length = len;\n\t\t\t}\n\n\t\t\twhile (points.length < len) {\n\t\t\t\tpoints.push(new RopePoint(0, 0, 0, 1.0));\n\t\t\t}\n\n\t\t\tif (calculatedPoints.length > len) {\n\t\t\t\tcalculatedPoints.length = len;\n\t\t\t}\n\n\t\t\twhile (calculatedPoints.length < len) {\n\t\t\t\tcalculatedPoints.push(new RopePoint(0, 0, 0, 1.0));\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Refreshes the rope sprite mesh\n\t\t *\n\t\t * @param {boolean} [forceUpdate=false] if true, everything will be updated in any case\n\t\t */\n\t\trefresh(forceUpdate = false) {\n\t\t\t// using \"this.points\" instead of old \"ready\" hack\n\n\t\t\tif (!this.points || this._texture.noFrame) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (this._lastWidth !== this.width\n\t\t\t\t|| this._lastHeight !== this.height) {\n\t\t\t\tthis._lastWidth = this.width;\n\t\t\t\tthis._lastHeight = this.height;\n\t\t\t\tif (this.autoResetVertices) {\n\t\t\t\t\tthis.resetPoints();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsuper.refresh(forceUpdate);\n\t\t}\n\n\t\t/**\n\t\t * Calculate default position for points\n\t\t */\n\t\tcalcPoints() {\n\t\t\tconst len = this._verticesX;\n\t\t\tconst points = this.calculatedPoints;\n\n\t\t\tconst dir = this._direction;\n\n\t\t\tconst width = this.width;\n\t\t\tconst height = this.height;\n\n\t\t\tconst dx = GroupD8.uX(dir);\n\t\t\tconst dy = GroupD8.uY(dir);\n\n\t\t\tconst anchor = this._anchor as any;\n\t\t\tconst offsetX = dx !== 0 ? 0.5 - anchor._x : 0;\n\t\t\tconst offsetY = dy !== 0 ? 0.5 - anchor._y : 0;\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tconst t = (i - ((len - 1) * 0.5)) / (len - 1);\n\n\t\t\t\tpoints[i].x = ((t * dx) + offsetX) * width;\n\t\t\t\tpoints[i].y = ((t * dy) + offsetY) * height;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * sets default points coordinates\n\t\t */\n\t\tresetPoints() {\n\t\t\tthis.calcPoints();\n\n\t\t\tconst len = this._verticesX;\n\t\t\tconst points = this.points;\n\t\t\tconst calculatedPoints = this.calculatedPoints;\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tpoints[i].x = calculatedPoints[i].x;\n\t\t\t\tpoints[i].y = calculatedPoints[i].y;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * sets default shift - zero\n\t\t */\n\t\tresetOffsets() {\n\t\t\tconst points = this.points;\n\t\t\tconst len = points.length;\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tpoints[i].offset = 0.0;\n\t\t\t}\n\n\t\t\tfor (let i = 0; i < len; i++) {\n\t\t\t\tpoints[i].scale = 1.0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * clears rope points\n\t\t */\n\t\treset() {\n\t\t\tthis._checkPointsLen();\n\t\t\tthis.resetPoints();\n\t\t\tthis.resetOffsets();\n\n\t\t\tsuper.reset();\n\t\t}\n\n\t\t/**\n\t\t * Refreshes vertices of Rope mesh\n\t\t */\n\t\tcalcVertices() {\n\t\t\tconst points = this.points;\n\n\t\t\tlet lastPoint = points[0];\n\t\t\tlet nextPoint;\n\t\t\tlet normalX = 0;\n\t\t\tlet normalY = 0;\n\n\t\t\tconst width = this.width;\n\t\t\tconst height = this.height;\n\t\t\tconst vertices = this.calculatedVertices;\n\t\t\tconst verticesX = this.verticesX;\n\t\t\tconst verticesY = this.verticesY;\n\t\t\tconst direction = this._direction;\n\n\t\t\tconst vx = GroupD8.vX(direction);\n\t\t\tconst vy = GroupD8.vY(direction);\n\n\t\t\tconst wide = (vx * width) + (vy * height);\n\n\t\t\tconst anchor = this._anchor as any;\n\t\t\tconst normalOffset = wide * ((anchor._x * vx) + (anchor._y * vy));\n\t\t\tconst normalFactor = -Math.abs(wide) / (verticesY - 1);\n\n\t\t\tfor (let i = 0; i < verticesX; i++) {\n\t\t\t\tconst point = points[i];\n\t\t\t\t// in case someone used Point instead of RopePoint\n\t\t\t\tconst offset = points[i].offset || 0;\n\t\t\t\tconst scale = (points[i].scale !== undefined) ? points[i].scale : 1.0;\n\n\t\t\t\tif (i < points.length - 1) {\n\t\t\t\t\tnextPoint = points[i + 1];\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tnextPoint = point;\n\t\t\t\t}\n\n\t\t\t\tnormalY = -(nextPoint.x - lastPoint.x);\n\t\t\t\tnormalX = nextPoint.y - lastPoint.y;\n\n\t\t\t\tconst perpLength = Math.sqrt((normalX * normalX) + (normalY * normalY));\n\n\t\t\t\tnormalX /= perpLength;\n\t\t\t\tnormalY /= perpLength;\n\n\t\t\t\tfor (let j = 0; j < verticesY; j++) {\n\t\t\t\t\tconst ind = (i + (j * verticesX)) * 2;\n\n\t\t\t\t\tvertices[ind] = point.x + (normalX * (offset + (scale * (normalOffset + (normalFactor * j)))));\n\t\t\t\t\tvertices[ind + 1] = point.y + (normalY * (offset + (scale * (normalOffset + (normalFactor * j)))));\n\t\t\t\t}\n\n\t\t\t\tlastPoint = point;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * calculate colors if present\n\t\t */\n\t\tcalcColors() {\n\t\t\tconst colors = this.colors;\n\t\t\tconst points = this.points;\n\n\t\t\tconst verticesX = this.verticesX;\n\t\t\tconst verticesY = this.verticesY;\n\n\t\t\tlet j = 0;\n\t\t\tfor (let i = 0; i < verticesX; i++) {\n\t\t\t\tconst color = points[i].color;\n\t\t\t\tif (color._currentUpdateID !== color._updateID) {\n\t\t\t\t\tcolor.updateTransformLocal();\n\t\t\t\t\tthis.dirty++;\n\t\t\t\t}\n\t\t\t\tfor (let j = 0; j < verticesY; j++) {\n\t\t\t\t\tconst ind = (i + (j * verticesX)) * 2;\n\t\t\t\t\tcolors[ind] = color.darkRgba;\n\t\t\t\t\tcolors[ind + 1] = color.lightRgba;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tenableColors() {\n\t\t\tfor (let i = 0; i < this.points.length; i++) {\n\t\t\t\tthis.points[i].color;\n\t\t\t}\n\t\t\tsuper.enableColors();\n\t\t}\n\t}\n}","namespace pixi_heaven.mesh {\n\t/**\n\t * The Rope Point object is a point with some info about normals\n\t *\n\t * @class\n\t * @memberof PIXI.mesh\n\t */\n\texport class RopePoint extends PIXI.Point {\n\t\toffset: number;\n\t\tscale: number;\n\t\t_color: ColorTransform;\n\n\t\t/**\n\t\t * @param {number} [x=0] - position of the point on the x axis\n\t\t * @param {number} [y=0] - position of the point on the y axis\n\t\t * @param {number} [offset=0] - offsets the point by normal\n\t\t * @param {number} [scale=1.0] - scales the point by normal\n\t\t */\n\t\tconstructor(x = 0, y = 0, offset = 0, scale = 1.0) {\n\t\t\tsuper(x, y);\n\t\t\t/**\n\t\t\t * @member {number} position of the\n\t\t\t * @default 0\n\t\t\t */\n\t\t\tthis.offset = offset;\n\t\t\t/**\n\t\t\t * @member {number}\n\t\t\t * @default 1.0\n\t\t\t */\n\t\t\tthis.scale = scale;\n\n\t\t\t/**\n\t\t\t * Color transform\n\t\t\t * @type {pixi_heaven.ColorTransform}\n\t\t\t * @private\n\t\t\t */\n\t\t\tthis._color = null;\n\t\t}\n\n\t\tget color(): ColorTransform {\n\t\t\tif (this._color === null) {\n\t\t\t\tthis._color = new ColorTransform();\n\t\t\t}\n\n\t\t\treturn this._color;\n\t\t}\n\n\t\tset color(val: ColorTransform) {\n\t\t\tif (typeof val === \"number\") {\n\t\t\t\tthis.color.tintBGR = val;\n\t\t\t} else {\n\t\t\t\tthis.color = val;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Creates a clone of this point\n\t\t *\n\t\t * @return {PIXI.RopePoint} a copy of the point\n\t\t */\n\t\tclone() {\n\t\t\treturn new RopePoint(this.x, this.y, this.offset, this.scale);\n\t\t}\n\n\t\t/**\n\t\t * Copies everything from the given point\n\t\t *\n\t\t * @param {PIXI.Point | PIXI.RopePoint} p - The point to copy.\n\t\t */\n\t\tcopy(p: PIXI.Point | RopePoint) {\n\t\t\tthis.set(p.x, p.y, (p as any).offset, (p as any).scale);\n\t\t}\n\n\t\t/**\n\t\t * Sets the point to a new x and y position.\n\t\t * If y is omitted, both x and y will be set to x.\n\t\t *\n\t\t * @param {number} [x=0] - position of the point on the x axis\n\t\t * @param {number} [y=0] - position of the point on the y axis\n\t\t * @param {number} [offset=0] - offsets the point by normal\n\t\t * @param {number} [scale=1.0] - scales the point by normal\n\t\t */\n\t\tset(x: number, y: number, offset?: number, scale?: number) {\n\t\t\tthis.x = x || 0;\n\t\t\tthis.y = y || ((y !== 0) ? this.x : 0);\n\t\t\tthis.offset = offset || 0;\n\t\t\tthis.scale = (scale !== undefined) ? scale : 1.0;\n\t\t}\n\t}\n}\n","namespace pixi_heaven.mesh {\n\timport glCore = PIXI.glCore;\n\timport utils = PIXI.utils;\n\tconst matrixIdentity = PIXI.Matrix.IDENTITY;\n\n\texport class MeshColoredRenderer extends PIXI.ObjectRenderer {\n\t\tstatic vert = `\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aDark;\nattribute vec4 aLight;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\nuniform vec4 uLight, uDark;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vDark;\nvarying vec4 vLight;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n\n\tvLight.a = uLight.a * aLight.a;\n\tvDark.a = uDark.a;\n\t\n\tvLight.rgb = ((aLight.a - 1.0) * uDark.a + 1.0 - aLight.rgb) * uDark.rgb + aLight.rgb * uLight.rgb;\n\tvDark.rgb = ((aDark.a - 1.0) * uDark.a + 1.0 - aDark.rgb) * uDark.rgb + aDark.rgb * uLight.rgb;\n}\n`;\n\n\t\tstatic frag = `\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor.a = texColor.a * vLight.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * vDark.a + 1.0 - texColor.rgb) * vDark.rgb + texColor.rgb * vLight.rgb;\n}\n`;\n\n\t\tstatic fragTrim = `\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nuniform vec4 uClampFrame;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n    if (coord.x < uClampFrame.x || coord.x > uClampFrame.z\n        || coord.y < uClampFrame.y || coord.y > uClampFrame.w)\n            discard;\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor.a = texColor.a * vLight.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * vDark.a + 1.0 - texColor.rgb) * vDark.rgb + texColor.rgb * vLight.rgb;\n}\n`;\n\n\t\tshader: PIXI.Shader = null;\n\t\tshaderTrim: PIXI.Shader = null;\n\n\t\t/**\n\t\t * Sets up the renderer context and necessary buffers.\n\t\t *\n\t\t * @private\n\t\t */\n\t\tonContextChange() {\n\t\t\tconst gl = this.renderer.gl;\n\n\t\t\tthis.shader = new PIXI.Shader(gl, MeshColoredRenderer.vert, MeshColoredRenderer.frag);\n\t\t\tthis.shaderTrim = new PIXI.Shader(gl, MeshColoredRenderer.vert, MeshColoredRenderer.fragTrim);\n\t\t}\n\n\t\t/**\n\t\t * renders mesh\n\t\t *\n\t\t * @param {PIXI.mesh.Mesh} mesh mesh instance\n\t\t */\n\t\trender(mesh: Mesh) {\n\t\t\tconst renderer = this.renderer;\n\t\t\tconst gl = renderer.gl;\n\t\t\tconst texture = mesh._texture;\n\n\t\t\tif (!texture.valid) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet glData = mesh._glDatas[renderer.CONTEXT_UID];\n\t\t\t\n\t\t\tif (!glData || !glData.colorBuffer) {\n\t\t\t\trenderer.bindVao(null);\n\n\t\t\t\tglData = {\n\t\t\t\t\tvertexBuffer: glCore.GLBuffer.createVertexBuffer(gl, mesh.vertices, gl.STREAM_DRAW),\n\t\t\t\t\tuvBuffer: glCore.GLBuffer.createVertexBuffer(gl, mesh.uvs, gl.STREAM_DRAW),\n\t\t\t\t\tcolorBuffer: glCore.GLBuffer.createVertexBuffer(gl, mesh.colors, gl.STREAM_DRAW),\n\t\t\t\t\tindexBuffer: glCore.GLBuffer.createIndexBuffer(gl, mesh.indices, gl.STATIC_DRAW),\n\t\t\t\t\t// build the vao object that will render..\n\t\t\t\t\tvao: null,\n\t\t\t\t\tdirty: mesh.dirty,\n\t\t\t\t\tindexDirty: mesh.indexDirty\n\t\t\t\t};\n\n\t\t\t\t// build the vao object that will render..\n\t\t\t\tconst attrs = this.shader.attributes;\n\n\t\t\t\tglData.vao = new glCore.VertexArrayObject(gl)\n\t\t\t\t\t.addIndex(glData.indexBuffer)\n\t\t\t\t\t.addAttribute(glData.vertexBuffer, attrs.aVertexPosition, gl.FLOAT, false, 2 * 4, 0)\n\t\t\t\t\t.addAttribute(glData.uvBuffer, attrs.aTextureCoord, gl.FLOAT, false, 2 * 4, 0)\n\t\t\t\t\t.addAttribute(glData.colorBuffer, attrs.aDark, gl.UNSIGNED_BYTE, true, 2 * 4, 0)\n\t\t\t\t\t.addAttribute(glData.colorBuffer, attrs.aLight, gl.UNSIGNED_BYTE, true, 2 * 4, 4);\n\n\t\t\t\tmesh._glDatas[renderer.CONTEXT_UID] = glData;\n\t\t\t}\n\n\t\t\trenderer.bindVao(glData.vao);\n\n\t\t\tif (mesh.dirty !== glData.dirty) {\n\t\t\t\tglData.dirty = mesh.dirty;\n\t\t\t\tglData.uvBuffer.upload(mesh.uvs);\n\t\t\t\tglData.colorBuffer.upload(mesh.colors);\n\t\t\t}\n\n\t\t\tif (mesh.indexDirty !== glData.indexDirty) {\n\t\t\t\tglData.indexDirty = mesh.indexDirty;\n\t\t\t\tglData.indexBuffer.upload(mesh.indices);\n\t\t\t}\n\n\t\t\tglData.vertexBuffer.upload(mesh.vertices);\n\t\t\t\n\t\t\tconst isTrimmed = texture.trim && (texture.trim.width < texture.orig.width\n\t\t\t\t|| texture.trim.height < texture.orig.height);\n\t\t\tconst shader = isTrimmed ? this.shaderTrim : this.shader;\n\t\t\t\n\t\t\trenderer.bindShader(shader);\n\n\t\t\tshader.uniforms.uSampler = renderer.bindTexture(texture);\n\n\t\t\trenderer.state.setBlendMode(utils.correctBlendMode(mesh.blendMode, texture.baseTexture.premultipliedAlpha));\n\n\t\t\tif (shader.uniforms.uTransform) {\n\t\t\t\tif (mesh.uploadUvTransform) {\n\t\t\t\t\tshader.uniforms.uTransform = (mesh._uvTransform as any).mapCoord.toArray(true);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tshader.uniforms.uTransform = matrixIdentity.toArray(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isTrimmed)\n\t\t\t{\n\t\t\t\tshader.uniforms.uClampFrame = (mesh._uvTransform as any).uClampFrame;\n\t\t\t}\n\t\t\tshader.uniforms.translationMatrix = mesh.worldTransform.toArray(true);\n\n\t\t\tshader.uniforms.uLight = mesh.color.light;\n\t\t\tshader.uniforms.uDark = mesh.color.dark;\n\n\t\t\tconst drawMode = mesh.drawMode === Mesh.DRAW_MODES.TRIANGLE_MESH ? gl.TRIANGLE_STRIP : gl.TRIANGLES;\n\n\t\t\tglData.vao.draw(drawMode, mesh.indices.length, 0);\n\t\t}\n\t}\n\n\tPIXI.WebGLRenderer.registerPlugin('meshColored', MeshColoredRenderer);\n}\n","namespace pixi_heaven.mesh {\n\timport glCore = PIXI.glCore;\n\timport utils = PIXI.utils;\n\tconst matrixIdentity = PIXI.Matrix.IDENTITY;\n\n\texport class MeshHeavenRenderer extends PIXI.ObjectRenderer {\n\t\tstatic vert = `\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n`;\n\n\t\tstatic frag = `\nvarying vec2 vTextureCoord;\nuniform vec4 uLight, uDark;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor.a = texColor.a * uLight.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * uDark.a + 1.0 - texColor.rgb) * uDark.rgb + texColor.rgb * uLight.rgb;\n}\n`;\n\n\t\tstatic fragTrim = `\nvarying vec2 vTextureCoord;\nuniform vec4 uLight, uDark;\nuniform vec4 uClampFrame;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    vec2 coord = vTextureCoord;\n    if (coord.x < uClampFrame.x || coord.x > uClampFrame.z\n        || coord.y < uClampFrame.y || coord.y > uClampFrame.w)\n            discard;\n    vec4 texColor = texture2D(uSampler, vTextureCoord);\n    gl_FragColor.a = texColor.a * uLight.a;\n\tgl_FragColor.rgb = ((texColor.a - 1.0) * uDark.a + 1.0 - texColor.rgb) * uDark.rgb + texColor.rgb * uLight.rgb;\n}\n`;\n\n\t\tshader: PIXI.Shader = null;\n\t\tshaderTrim: PIXI.Shader = null;\n\n\t\t/**\n\t\t * Sets up the renderer context and necessary buffers.\n\t\t *\n\t\t * @private\n\t\t */\n\t\tonContextChange() {\n\t\t\tconst gl = this.renderer.gl;\n\n\t\t\tthis.shader = new PIXI.Shader(gl, MeshHeavenRenderer.vert, MeshHeavenRenderer.frag);\n\t\t\tthis.shaderTrim = new PIXI.Shader(gl, MeshHeavenRenderer.vert, MeshHeavenRenderer.fragTrim);\n\t\t}\n\n\t\t/**\n\t\t * renders mesh\n\t\t *\n\t\t * @param {PIXI.mesh.Mesh} mesh mesh instance\n\t\t */\n\t\trender(mesh: Mesh) {\n\t\t\tconst renderer = this.renderer;\n\t\t\tconst gl = renderer.gl;\n\t\t\tconst texture = mesh._texture;\n\n\t\t\tif (!texture.valid) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet glData = mesh._glDatas[renderer.CONTEXT_UID];\n\t\t\t\n\t\t\tif (!glData) {\n\t\t\t\trenderer.bindVao(null);\n\n\t\t\t\tglData = {\n\t\t\t\t\tvertexBuffer: glCore.GLBuffer.createVertexBuffer(gl, mesh.vertices, gl.STREAM_DRAW),\n\t\t\t\t\tuvBuffer: glCore.GLBuffer.createVertexBuffer(gl, mesh.uvs, gl.STREAM_DRAW),\n\t\t\t\t\tindexBuffer: glCore.GLBuffer.createIndexBuffer(gl, mesh.indices, gl.STATIC_DRAW),\n\t\t\t\t\t// build the vao object that will render..\n\t\t\t\t\tvao: null,\n\t\t\t\t\tdirty: mesh.dirty,\n\t\t\t\t\tindexDirty: mesh.indexDirty\n\t\t\t\t};\n\n\t\t\t\t// build the vao object that will render..\n\t\t\t\tglData.vao = new glCore.VertexArrayObject(gl)\n\t\t\t\t\t.addIndex(glData.indexBuffer)\n\t\t\t\t\t.addAttribute(glData.vertexBuffer, this.shader.attributes.aVertexPosition, gl.FLOAT, false, 2 * 4, 0)\n\t\t\t\t\t.addAttribute(glData.uvBuffer, this.shader.attributes.aTextureCoord, gl.FLOAT, false, 2 * 4, 0);\n\n\t\t\t\tmesh._glDatas[renderer.CONTEXT_UID] = glData;\n\t\t\t}\n\n\t\t\trenderer.bindVao(glData.vao);\n\n\t\t\tif (mesh.dirty !== glData.dirty) {\n\t\t\t\tglData.dirty = mesh.dirty;\n\t\t\t\tglData.uvBuffer.upload(mesh.uvs);\n\t\t\t}\n\n\t\t\tif (mesh.indexDirty !== glData.indexDirty) {\n\t\t\t\tglData.indexDirty = mesh.indexDirty;\n\t\t\t\tglData.indexBuffer.upload(mesh.indices);\n\t\t\t}\n\n\t\t\tglData.vertexBuffer.upload(mesh.vertices);\n\t\t\t\n\t\t\tconst isTrimmed = texture.trim && (texture.trim.width < texture.orig.width\n\t\t\t\t|| texture.trim.height < texture.orig.height);\n\t\t\tconst shader = isTrimmed ? this.shaderTrim : this.shader;\n\t\t\t\n\t\t\trenderer.bindShader(shader);\n\n\t\t\tshader.uniforms.uSampler = renderer.bindTexture(texture);\n\n\t\t\trenderer.state.setBlendMode(utils.correctBlendMode(mesh.blendMode, texture.baseTexture.premultipliedAlpha));\n\n\t\t\tif (shader.uniforms.uTransform) {\n\t\t\t\tif (mesh.uploadUvTransform) {\n\t\t\t\t\tshader.uniforms.uTransform = (mesh._uvTransform as any).mapCoord.toArray(true);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tshader.uniforms.uTransform = matrixIdentity.toArray(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isTrimmed)\n\t\t\t{\n\t\t\t\tshader.uniforms.uClampFrame = (mesh._uvTransform as any).uClampFrame;\n\t\t\t}\n\t\t\tshader.uniforms.translationMatrix = mesh.worldTransform.toArray(true);\n\n\t\t\tshader.uniforms.uLight = mesh.color.light;\n\t\t\tshader.uniforms.uDark = mesh.color.dark;\n\n\t\t\tconst drawMode = mesh.drawMode === Mesh.DRAW_MODES.TRIANGLE_MESH ? gl.TRIANGLE_STRIP : gl.TRIANGLES;\n\n\t\t\tglData.vao.draw(drawMode, mesh.indices.length, 0);\n\t\t}\n\t}\n\n\tPIXI.WebGLRenderer.registerPlugin('meshHeaven', MeshHeavenRenderer);\n}\n","namespace pixi_heaven {\n\texport interface IAtlasOptions {\n\t\twidth ?: number;\n\t\theight ?: number;\n\t\tloadFactor ?: number;\n\t\trepackBeforeResize ?: boolean;\n\t\trepackAfterResize ?: boolean;\n\t\talgoTreeResize?: boolean;\n\t\tmaxSize ?: number;\n\t\tformat ?: number;\n\t\thasAllFields ?: boolean;\n\t\tmipLevels ?: number;\n\t\tpadding ?: number;\n\t}\n\n\texport class AtlasOptions implements IAtlasOptions {\n\t\twidth = 2048;\n\t\theight = 2048;\n\t\tloadFactor = 0.95;\n\t\trepackBeforeResize = true;\n\t\trepackAfterResize = true;\n\t\talgoTreeResize = false;\n\t\tmaxSize = 0;\n\t\tmipLevels = 0;\n\t\tpadding = 0;\n\n\t\tformat = WebGLRenderingContext.RGBA;\n\n\t\tstatic MAX_SIZE = 0;\n\n\t\tconstructor(src: IAtlasOptions) {\n\t\t\tif (src) {\n\t\t\t\tthis.assign(src);\n\t\t\t}\n\t\t}\n\n\t\tassign(src: IAtlasOptions) {\n\t\t\tthis.width = src.width || this.width;\n\t\t\tthis.height = src.height || src.width || this.height;\n\t\t\tthis.maxSize = src.maxSize || AtlasOptions.MAX_SIZE;\n\t\t\tthis.format = src.format || this.format;\n\t\t\tthis.loadFactor = src.loadFactor || this.loadFactor;\n\t\t\tthis.padding = src.padding || this.padding;\n\t\t\tthis.mipLevels = src.mipLevels || this.mipLevels;\n\t\t\tif (src.repackAfterResize !== undefined) {\n\t\t\t\tthis.repackAfterResize = src.repackAfterResize;\n\t\t\t}\n\t\t\tif (src.repackBeforeResize !== undefined) {\n\t\t\t\tthis.repackBeforeResize = src.repackBeforeResize;\n\t\t\t}\n\t\t\tif (src.algoTreeResize !== undefined) {\n\t\t\t\tthis.algoTreeResize = src.algoTreeResize;\n\t\t\t}\n\t\t\treturn this;\n\t\t}\n\t}\n}\n","namespace pixi_heaven {\n\tconst RGBA = WebGLRenderingContext.RGBA;\n\timport BaseTexture = PIXI.BaseTexture;\n\timport Rectangle = PIXI.Rectangle;\n\n\texport class SuperAtlasEntry {\n\t\tbaseTexture: BaseTexture;\n\t\tsuperAtlas: SuperAtlas;\n\t}\n\n\texport class AtlasTree implements IRepackResult {\n\t\tfailed: Array<AtlasEntry> = [];\n\n\t\troot: AtlasNode<AtlasEntry>;\n\n\t\tgood: Array<AtlasEntry> = [];\n\n\t\thash: { [key: number]: AtlasNode<AtlasEntry> } = {};\n\n\t\tapply() {\n\t\t\tthrow new Error(\"Method not implemented.\");\n\t\t}\n\t}\n\n\texport class SuperAtlas implements ITextureResource, IAtlas {\n\t\tstatic MAX_SIZE = 2048;\n\n\t\tbaseTexture: PIXI.BaseTexture = null;\n\t\tformat: number = RGBA;\n\t\twidth: number = 2048;\n\t\theight: number = 2048;\n\t\toptions: AtlasOptions;\n\n\t\tall: { [key: number]: AtlasEntry } = {};\n\n\t\ttree: AtlasTree = null;\n\n\t\tonTextureNew(baseTexture: PIXI.BaseTexture) {\n\t\t\tthis.baseTexture = baseTexture;\n\t\t\tbaseTexture.resource = this;\n\t\t\tbaseTexture.width = this.width;\n\t\t\tbaseTexture.height = this.height;\n\t\t\tbaseTexture.hasLoaded = true;\n\t\t\tbaseTexture.height = this.height;\n\t\t}\n\n\t\tstatic create(options: IAtlasOptions) {\n\t\t\tlet opt = options instanceof AtlasOptions ? options : new AtlasOptions(options);\n\t\t\tlet atlas = new SuperAtlas();\n\t\t\tatlas.options = opt;\n\t\t\tatlas.width = opt.width;\n\t\t\tatlas.height = opt.height;\n\t\t\tatlas.format = opt.format;\n\t\t\tatlas.onTextureNew(new PIXI.BaseTexture());\n\n\t\t\tatlas.tree = new AtlasTree();\n\t\t\tatlas.tree.root = atlas.createAtlasRoot();\n\n\t\t\treturn atlas;\n\t\t}\n\n\t\tdestroy() {\n\t\t\tif (this.baseTexture) {\n\t\t\t\tthis.baseTexture.destroy();\n\t\t\t\tthis.baseTexture = null;\n\t\t\t}\n\t\t}\n\n\t\tadd(texture: BaseTexture | PIXI.Texture, swapCache?: boolean): TextureRegion {\n\t\t\tlet baseTexture: PIXI.BaseTexture;\n\t\t\tlet arg: PIXI.Texture;\n\t\t\tif (texture instanceof BaseTexture) {\n\t\t\t\tbaseTexture = texture as BaseTexture;\n\t\t\t\targ = new PIXI.Texture(baseTexture);\n\t\t\t} else {\n\t\t\t\tbaseTexture = texture.baseTexture;\n\t\t\t\targ = texture;\n\t\t\t}\n\n\t\t\tlet entry = this.all[baseTexture.uid];\n\t\t\tif (!entry) {\n\t\t\t\tentry = new AtlasEntry(this, baseTexture);\n\n\t\t\t\t// pad it\n\t\t\t\tlet p1 = this.options.padding, p2 = (1 << this.options.mipLevels);\n\t\t\t\tlet w1 = entry.width + p1, h1 = entry.height + p1;\n\t\t\t\tentry.width = w1 + (p2 - entry.width % p2) % p2;\n\t\t\t\tentry.height = h1 + (p2 - entry.height % p2) % p2;\n\n\t\t\t\tthis.insert(entry);\n\t\t\t}\n\n\t\t\tlet region = new TextureRegion(entry, arg);\n\t\t\tif (swapCache) {\n\t\t\t\tlet ids = texture.textureCacheIds;\n\t\t\t\tfor (let i = 0; i < ids.length; i++) {\n\t\t\t\t\tPIXI.utils.TextureCache[ids[i]] = region;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tentry.regions.push(region);\n\t\t\treturn region;\n\t\t}\n\n\t\taddHash(textures: { [key: string]: PIXI.Texture; }, swapCache?: boolean): { [key: string]: TextureRegion; } {\n\t\t\tlet hash: { [key: string]: TextureRegion; } = {};\n\t\t\tfor (let key in textures) {\n\t\t\t\thash[key] = this.add(textures[key], swapCache);\n\t\t\t}\n\t\t\treturn hash;\n\t\t}\n\n\t\tinsert(entry: AtlasEntry) {\n\t\t\tif (this.tryInsert(entry)) return;\n\t\t\tthis.tree.failed.push(entry);\n\t\t\tthis.all[entry.baseTexture.uid] = entry;\n\t\t}\n\n\t\tremove(entry: AtlasEntry) {\n\t\t\tif (entry.currentNode == null) {\n\t\t\t\tlet failed = this.tree.failed;\n\t\t\t\tlet ind = failed.indexOf(entry);\n\t\t\t\tif (ind >= 0) {\n\t\t\t\t\tfailed.splice(ind, 1);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Cant remove packed texture\");\n\t\t\t}\n\t\t}\n\n\t\ttryInsert(entry: AtlasEntry): boolean {\n\t\t\tlet node = this.tree.root.insert(this.width, this.height,\n\t\t\t\tentry.width, entry.height, entry);\n\t\t\tif (!node) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tentry.nodeUpdateID = ++this.baseTexture._updateID;\n\t\t\tentry.currentNode = node;\n\t\t\tentry.currentAtlas = this;\n\t\t\tthis.all[entry.baseTexture.uid] = entry;\n\t\t\tthis.tree.hash[entry.baseTexture.uid] = node;\n\t\t\tthis.tree.good.push(entry);\n\t\t\treturn true;\n\t\t}\n\n\t\tprivate createAtlasRoot() {\n\t\t\tlet res = new AtlasNode<AtlasEntry>();\n\t\t\tif (!this.options.algoTreeResize) {\n\t\t\t\tres.rect.width = this.width;\n\t\t\t\tres.rect.height = this.height;\n\t\t\t}\n\t\t\treturn res;\n\t\t}\n\n\t\trepack(failOnFirst: boolean = false): IRepackResult {\n\t\t\tlet pack = new AtlasTree();\n\n\t\t\tlet all = this.tree.good.slice(0);\n\t\t\tlet failed = this.tree.failed;\n\t\t\tfor (let i = 0; i < failed.length; i++) {\n\t\t\t\tall.push(failed[i]);\n\t\t\t}\n\n\t\t\tall.sort((a: AtlasEntry, b: AtlasEntry) => {\n\t\t\t\tif (b.width == a.width) {\n\t\t\t\t\treturn b.height - a.height;\n\t\t\t\t}\n\t\t\t\treturn b.width - a.width;\n\t\t\t});\n\n\t\t\tlet root = this.createAtlasRoot();\n\t\t\tpack.root = root;\n\t\t\tfor (let obj of all) {\n\t\t\t\tlet node = root.insert(\n\t\t\t\t\tthis.width, this.height,\n\t\t\t\t\tobj.width, obj.height, obj);\n\t\t\t\tif (!node) {\n\t\t\t\t\tpack.failed.push(obj);\n\t\t\t\t\tif (failOnFirst) {\n\t\t\t\t\t\treturn pack;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tpack.hash[obj.baseTexture.uid] = node;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tpack.apply = () => {\n\t\t\t\t//TODO: full copy?\n\t\t\t\tthis.tree.root = pack.root;\n\t\t\t\tthis.tree.failed = pack.failed.slice(0);\n\t\t\t\tthis.tree.hash = pack.hash;\n\n\t\t\t\tfor (let obj of all) {\n\t\t\t\t\tobj.currentNode = pack.hash[obj.baseTexture.uid] || null;\n\t\t\t\t\tobj.currentAtlas = obj.currentNode ? this : null;\n\t\t\t\t\tfor (let region of obj.regions) {\n\t\t\t\t\t\tregion.updateFrame();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.imageTextureRebuildUpdateID++;\n\t\t\t};\n\t\t\treturn pack;\n\t\t}\n\n\t\tprepare(renderer: PIXI.WebGLRenderer): Promise<void> {\n\t\t\t//TODO: wait while everything loads\n\n\t\t\trenderer.textureManager.updateTexture(this.baseTexture);\n\t\t\tthrow new Error(\"Method not implemented.\");\n\t\t}\n\n\t\timageTextureRebuildUpdateID: number = 0;\n\n\t\tonTextureUpload(renderer: PIXI.WebGLRenderer, baseTexture: PIXI.BaseTexture, tex: PIXI.glCore.GLTexture): boolean {\n\t\t\ttex.bind();\n\t\t\tconst imgTexture:any = this.baseTexture;\n\t\t\tconst gl = tex.gl;\n\t\t\tconst levels = this.options.mipLevels;\n\n\t\t\ttex.mipmap = levels > 0;\n\t\t\ttex.premultiplyAlpha = imgTexture.premultipliedAlpha;\n\t\t\tgl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, imgTexture.premultipliedAlpha);\n\n\t\t\tconst uploadAll = tex._updateID < this.imageTextureRebuildUpdateID;\n\t\t\tif (uploadAll) {\n\t\t\t\tgl.texImage2D(\n\t\t\t\t\tgl.TEXTURE_2D, //GLenum target\n\t\t\t\t\t0, //GLint level\n\t\t\t\t\timgTexture.glFormat || gl.RGBA, //GLint internalformat\n\t\t\t\t\timgTexture.width, //GLsizei width\n\t\t\t\t\timgTexture.height, //GLsizei height\n\t\t\t\t\t0, //GLint border // should be 0, it is borderColor\n\t\t\t\t\timgTexture.glFormat || gl.RGBA, //GLenum format\n\t\t\t\t\timgTexture.glType || gl.UNSIGNED_BYTE,//GLenum type\n\t\t\t\t\tnull //ArrayBufferView? pixels\n\t\t\t\t);\n\n\t\t\t\tif (tex.mipmap) {\n\t\t\t\t\t//testing\n\t\t\t\t\tfor (let lvl = 1; (imgTexture.width >> lvl) > 0; lvl++) {\n\t\t\t\t\t\tgl.texImage2D(\n\t\t\t\t\t\t\tgl.TEXTURE_2D, //GLenum target\n\t\t\t\t\t\t\tlvl, //GLint level\n\t\t\t\t\t\t\timgTexture.glFormat || gl.RGBA, //GLint internalformat\n\t\t\t\t\t\t\timgTexture.width >> lvl, //GLsizei width\n\t\t\t\t\t\t\timgTexture.height >> lvl, //GLsizei height\n\t\t\t\t\t\t\t0, //GLint border // should be 0, it is borderColor\n\t\t\t\t\t\t\timgTexture.glFormat || gl.RGBA, //GLenum format\n\t\t\t\t\t\t\timgTexture.glType || gl.UNSIGNED_BYTE,//GLenum type\n\t\t\t\t\t\t\tnull //ArrayBufferView? pixels\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let key in this.tree.hash) {\n\t\t\t\tlet node = this.tree.hash[key];\n\t\t\t\tlet entry:any = node.data;\n\t\t\t\tlet entryTex:any = entry.baseTexture;\n\t\t\t\t// if (!obj.isLoaded) continue;\n\t\t\t\tif (!uploadAll && tex._updateID >= entry.nodeUpdateID) continue;\n\n\t\t\t\tlet rect: Rectangle = node.rect;\n\t\t\t\tgl.texSubImage2D(\n\t\t\t\t\tgl.TEXTURE_2D, //GLenum target\n\t\t\t\t\t0, //GLint level\n\t\t\t\t\trect.left, // GLint xoffset\n\t\t\t\t\trect.top, // GLint yoffset\n\t\t\t\t\tentry.baseTexture.glFormat || gl.RGBA, //GLenum format\n\t\t\t\t\tentry.baseTexture.glType || gl.UNSIGNED_BYTE,//GLenum type\n\t\t\t\t\tentry.baseTexture.source // TexImageSource source\n\t\t\t\t);\n\n\t\t\t\tif (levels > 0) {\n\t\t\t\t\tif (!entryTex._mips || entryTex._mips.length < levels) {\n\t\t\t\t\t\tentryTex.generateMips(levels);\n\t\t\t\t\t}\n\t\t\t\t\tconst mips = entryTex._mips;\n\t\t\t\t\tfor (let lvl = 1; lvl <= levels; lvl++) {\n\t\t\t\t\t\tconst mip = mips[lvl - 1];\n\t\t\t\t\t\tgl.texSubImage2D(\n\t\t\t\t\t\t\tgl.TEXTURE_2D, //GLenum target\n\t\t\t\t\t\t\tlvl, //GLint level\n\t\t\t\t\t\t\trect.left >> lvl, // GLint xoffset\n\t\t\t\t\t\t\trect.top >> lvl, // GLint yoffset\n\t\t\t\t\t\t\tmip.width,\n\t\t\t\t\t\t\tmip.height,\n\t\t\t\t\t\t\tentryTex.glFormat || gl.RGBA, //GLenum format\n\t\t\t\t\t\t\tentryTex.glType || gl.UNSIGNED_BYTE,//GLenum type\n\t\t\t\t\t\t\tmip.data\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n}\n","namespace pixi_heaven {\n\tconst whiteRgba = [1.0, 1.0, 1.0, 1.0];\n\tconst blackRgba = [0.0, 0.0, 0.0, 1.0];\n\n\texport class ColorTransform {\n\t\tdark = new Float32Array(blackRgba);\n\t\tlight = new Float32Array(whiteRgba);\n\n\t\t_updateID = 0;\n\t\t_currentUpdateID = -1;\n\n\t\tdarkRgba: number = 0;\n\t\tlightRgba: number = -1;\n\t\thasNoTint: boolean = true;\n\n\t\tget darkR() {\n\t\t\treturn this.dark[0];\n\t\t}\n\n\t\tset darkR(value: number) {\n\t\t\tif (this.dark[0] === value) return;\n\t\t\tthis.dark[0] = value;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget darkG() {\n\t\t\treturn this.dark[1];\n\t\t}\n\n\t\tset darkG(value: number) {\n\t\t\tif (this.dark[1] === value) return;\n\t\t\tthis.dark[1] = value;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget darkB() {\n\t\t\treturn this.dark[2];\n\t\t}\n\n\t\tset darkB(value: number) {\n\t\t\tif (this.dark[2] === value) return;\n\t\t\tthis.dark[2] = value;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget lightR() {\n\t\t\treturn this.light[0];\n\t\t}\n\n\t\tset lightR(value: number) {\n\t\t\tif (this.light[0] === value) return;\n\t\t\tthis.light[0] = value;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget lightG() {\n\t\t\treturn this.light[1];\n\t\t}\n\n\t\tset lightG(value: number) {\n\t\t\tif (this.light[1] === value) return;\n\t\t\tthis.light[1] = value;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget lightB() {\n\t\t\treturn this.light[2];\n\t\t}\n\n\t\tset lightB(value: number) {\n\t\t\tif (this.light[2] === value) return;\n\t\t\tthis.light[2] = value;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget alpha() {\n\t\t\treturn this.light[3];\n\t\t}\n\n\t\tset alpha(value: number) {\n\t\t\tif (this.light[3] === value) return;\n\t\t\tthis.light[3] = value;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget pma() {\n\t\t\treturn this.dark[3] !== 0.0;\n\t\t}\n\n\t\tset pma(value: boolean) {\n\t\t\tif ((this.dark[3] !== 0.0) !== value) return;\n\t\t\tthis.dark[3] = value ? 1.0 : 0.0;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tget tintBGR() {\n\t\t\tconst light = this.light;\n\t\t\treturn ((light[0] * 255) << 16) + ((light[1] * 255) << 8) + (light[2] * 255 | 0);\n\t\t}\n\n\t\tset tintBGR(value: number) {\n\t\t\tthis.setLight(\n\t\t\t\t((value >> 16) & 0xff) / 255.0,\n\t\t\t\t((value >> 8) & 0xff) / 255.0,\n\t\t\t\t(value & 0xff) / 255.0\n\t\t\t);\n\t\t}\n\n\t\tsetLight(R: number, G: number, B: number) {\n\t\t\tconst color = this.light;\n\n\t\t\tif (color[0] === R && color[1] === G && color[2] === B) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcolor[0] = R;\n\t\t\tcolor[1] = G;\n\t\t\tcolor[2] = B;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tsetDark(R: number, G: number, B: number) {\n\t\t\tconst color = this.dark;\n\n\t\t\tif (color[0] === R && color[1] === G && color[2] === B) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcolor[0] = R;\n\t\t\tcolor[1] = G;\n\t\t\tcolor[2] = B;\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tclear() {\n\t\t\tthis.dark[0] = 0.0;\n\t\t\tthis.dark[1] = 0.0;\n\t\t\tthis.dark[2] = 0.0;\n\t\t\tthis.light[0] = 1.0;\n\t\t\tthis.light[1] = 1.0;\n\t\t\tthis.light[2] = 1.0;\n\t\t}\n\n\t\tinvalidate() {\n\t\t\tthis._updateID++;\n\t\t}\n\n\t\tupdateTransformLocal() {\n\t\t\tconst dark = this.dark, light = this.light;\n\t\t\tconst la = 255 * (1.0 + (light[3] - 1.0) * dark[3]);\n\t\t\tthis.hasNoTint = dark[0] === 0.0 && dark[1] === 0.0 && dark[2] === 0.0\n\t\t\t\t&& light[0] === 1.0 && light[1] === 1.0 && light[2] === 1.0;\n\t\t\tthis.darkRgba = (dark[0] * la | 0) + ((dark[1] * la) << 8)\n\t\t\t\t+ ((dark[2] * la) << 16) + ((dark[3] * 255) << 24);\n\t\t\tthis.lightRgba = (light[0] * la | 0) + ((light[1] * la) << 8)\n\t\t\t\t+ ((light[2] * la) << 16) + ((light[3] * 255) << 24);\n\t\t\tthis._currentUpdateID = this._updateID;\n\t\t}\n\n\t\tupdateTransform() {\n\t\t\tif (this._currentUpdateID === this._updateID) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.updateTransformLocal();\n\t\t}\n\t}\n}\n","declare module PIXI {\n\tinterface Sprite {\n\t\tconvertToHeaven(): pixi_heaven.Sprite;\n\t}\n\n\tinterface Mesh {\n\t\tconvertToHeaven(): void;\n\t}\n\n\tinterface Graphics {\n\t\tconvertToHeaven(): void;\n\t}\n\n\tinterface Container {\n\t\tconvertToHeaven(): void;\n\n\t\tconvertSubtreeToHeaven(): void;\n\t}\n\n\t// TODO: ParticleContainer?\n}\n\nnamespace pixi_heaven {\n\t(PIXI as any).Container.prototype.convertToHeaven = function () {\n\t};\n\n\tfunction tintGet() {\n\t\treturn this.color.tintBGR;\n\t}\n\n\tfunction tintSet(value: number) {\n\t\tthis.color.tintBGR = value;\n\t}\n\n\tfunction tintRGBGet() {\n\t\tthis.color.updateTransform();\n\t\treturn this.color.lightRgba & 0xffffff;\n\t}\n\n\t(PIXI as any).Sprite.prototype.convertToHeaven = function () {\n\t\tif (this.color) {\n\t\t\treturn;\n\t\t}\n\n\t\tObject.defineProperty(this, \"tint\", {\n\t\t\tget: tintGet,\n\t\t\tset: tintSet,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t\tObject.defineProperty(this, \"_tintRGB\", {\n\t\t\tget: tintRGBGet,\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true\n\t\t});\n\t\tthis._onTextureUpdate = Sprite.prototype._onTextureUpdate;\n\t\tthis.updateTransform = Sprite.prototype.updateTransform;\n\t\tthis.color = new ColorTransform();\n\t\tthis.pluginName = 'spriteHeaven';\n\t\treturn this;\n\t};\n\n\t(PIXI as any).Container.prototype.convertSubtreeToHeaven = function () {\n\t\tif (this.convertToHeaven) {\n\t\t\tthis.convertToHeaven();\n\t\t}\n\t\tfor (let i = 0; i < this.children.length; i++) {\n\t\t\tthis.children[i].convertSubtreeToHeaven();\n\t\t}\n\t};\n}\n","namespace pixi_heaven {\n\timport sign = PIXI.utils.sign;\n\n\tconst tempMat = new PIXI.Matrix();\n\n\texport class Sprite extends PIXI.Sprite {\n\t\tcolor = new ColorTransform();\n\t\tmaskSprite: PIXI.Sprite = null;\n\t\tmaskVertexData: Float32Array = null;\n\n\t\tconstructor(texture: PIXI.Texture) {\n\t\t\tsuper(texture);\n\t\t\tthis.pluginName = 'spriteHeaven';\n\t\t\tif (this.texture.valid) this._onTextureUpdate();\n\t\t}\n\n\t\tget _tintRGB() {\n\t\t\tthis.color.updateTransform();\n\t\t\treturn this.color.lightRgba & 0xffffff;\n\t\t}\n\n\t\tset _tintRGB(value: number) {\n\t\t\t//nothing\n\t\t}\n\n\t\tget tint() {\n\t\t\treturn this.color ? this.color.tintBGR : 0xffffff;\n\t\t}\n\n\t\tset tint(value: number) {\n\t\t\tthis.color && (this.color.tintBGR = value);\n\t\t}\n\n\t\tupdateTransform() {\n\t\t\tthis._boundsID++;\n\n\t\t\tthis.transform.updateTransform(this.parent.transform);\n\n\t\t\t// TODO: check render flags, how to process stuff here\n\t\t\tthis.worldAlpha = this.alpha * this.parent.worldAlpha;\n\t\t\tif (this.color) {\n\t\t\t\tthis.color.alpha = this.worldAlpha;\n\t\t\t\tthis.color.updateTransform();\n\t\t\t}\n\n\t\t\tfor (let i = 0, j = this.children.length; i < j; ++i) {\n\t\t\t\tconst child = this.children[i];\n\n\t\t\t\tif (child.visible) {\n\t\t\t\t\tchild.updateTransform();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t_onTextureUpdate() {\n\t\t\tthis._textureID = -1;\n\t\t\tthis._textureTrimmedID = -1;\n\t\t\tthis.cachedTint = 0xFFFFFF;\n\t\t\tif (this.color) {\n\t\t\t\tthis.color.pma = this._texture.baseTexture.premultipliedAlpha;\n\t\t\t}\n\n\t\t\t// so if _width is 0 then width was not set..\n\t\t\tif (this._width) {\n\t\t\t\tthis.scale.x = sign(this.scale.x) * this._width / this._texture.orig.width;\n\t\t\t}\n\n\t\t\tif (this._height) {\n\t\t\t\tthis.scale.y = sign(this.scale.y) * this._height / this._texture.orig.height;\n\t\t\t}\n\t\t}\n\n\t\tcalculateMaskVertices() {\n\t\t\t//WE HAVE A MASK\n\t\t\tconst maskSprite = this.maskSprite;\n\t\t\tconst tex = maskSprite.texture;\n\t\t\tconst orig = tex.orig;\n\t\t\tconst anchor = maskSprite.anchor;\n\n\t\t\tif (!tex.valid) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!tex.transform) {\n\t\t\t\t// margin = 0.0, let it bleed a bit, shader code becomes easier\n\t\t\t\t// assuming that atlas textures were made with 1-pixel padding\n\t\t\t\ttex.transform = new (PIXI as any).TextureMatrix(tex, 0.0);\n\t\t\t}\n\t\t\ttex.transform.update();\n\n\t\t\t//same operations as in SpriteMaskFilter\n\t\t\tmaskSprite.transform.worldTransform.copy(tempMat);\n\t\t\ttempMat.invert();\n\t\t\ttempMat.scale(1.0 / orig.width, 1.0 / orig.height);\n\t\t\ttempMat.translate(anchor.x, anchor.y);\n\t\t\ttempMat.prepend(tex.transform.mapCoord);\n\n\t\t\tif (!this.maskVertexData) {\n\t\t\t\tthis.maskVertexData = new Float32Array(8);\n\t\t\t}\n\n\t\t\tconst vertexData = this.vertexData;\n\t\t\tconst maskVertexData = this.maskVertexData;\n\n\t\t\tfor (let i = 0; i < 8; i += 2) {\n\t\t\t\tmaskVertexData[i] = vertexData[i] * tempMat.a + vertexData[i + 1] * tempMat.c + tempMat.tx;\n\t\t\t\tmaskVertexData[i + 1] = vertexData[i] * tempMat.b + vertexData[i + 1] * tempMat.d + tempMat.ty;\n\t\t\t}\n\t\t}\n\t}\n}\n","namespace pixi_heaven {\n\timport MultiTextureSpriteRenderer = pixi_heaven.webgl.MultiTextureSpriteRenderer;\n\n\tclass SpriteHeavenRenderer extends MultiTextureSpriteRenderer {\n\t\tshaderVert =\n\t\t\t`precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aLight, aDark;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * vec3(aVertexPosition, 1.0);\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vLight = aLight;\n    vDark = aDark;\n}\n`;\n\t\tshaderFrag = `\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\n\nvoid main(void) {\nvec4 texColor;\nvec2 texCoord = vTextureCoord;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor.a = texColor.a * vLight.a;\ngl_FragColor.rgb = ((texColor.a - 1.0) * vDark.a + 1.0 - texColor.rgb) * vDark.rgb + texColor.rgb * vLight.rgb;\n}`;\n\n\t\tcreateVao(vertexBuffer: PIXI.glCore.GLBuffer) {\n\t\t\tconst attrs = this.shader.attributes;\n\t\t\tthis.vertSize = attrs.aTextureId ? 6 : 5;\n\t\t\tthis.vertByteSize = this.vertSize * 4;\n\n\n\t\t\tconst gl = this.renderer.gl;\n\t\t\tconst vao = this.renderer.createVao()\n\t\t\t\t.addIndex(this.indexBuffer)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aVertexPosition, gl.FLOAT, false, this.vertByteSize, 0)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aTextureCoord, gl.UNSIGNED_SHORT, true, this.vertByteSize, 2 * 4)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aLight, gl.UNSIGNED_BYTE, true, this.vertByteSize, 3 * 4)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aDark, gl.UNSIGNED_BYTE, true, this.vertByteSize, 4 * 4);\n\n\t\t\tif (attrs.aTextureId) {\n\t\t\t\tvao.addAttribute(vertexBuffer, attrs.aTextureId, gl.FLOAT, false, this.vertByteSize, 5 * 4);\n\t\t\t}\n\n\t\t\treturn vao;\n\t\t}\n\n\t\tfillVertices(float32View: Float32Array, uint32View: Uint32Array, index: number, sprite: any, textureId: number) {\n\t\t\t//first, fill the coordinates!\n\n\t\t\tconst vertexData = sprite.vertexData;\n\n\t\t\tconst n = vertexData.length;\n\n\t\t\tconst lightRgba = sprite.color.lightRgba;\n\t\t\tconst darkRgba = sprite.color.darkRgba;\n\t\t\tconst stride = this.vertSize;\n\t\t\tconst oldIndex = index;\n\n\t\t\tfor (let i = 0; i < n; i += 2) {\n\t\t\t\tfloat32View[index] = vertexData[i];\n\t\t\t\tfloat32View[index + 1] = vertexData[i + 1];\n\t\t\t\tuint32View[index + 3] = lightRgba;\n\t\t\t\tuint32View[index + 4] = darkRgba;\n\t\t\t\tindex += stride;\n\t\t\t}\n\n\t\t\tconst uvs = sprite.uvs;\n\t\t\tif (uvs) {\n\t\t\t\tindex = oldIndex + 2;\n\t\t\t\tfor (let i = 0; i < n; i += 2) {\n\t\t\t\t\tuint32View[index] = (((uvs[i + 1] * 65535) & 0xFFFF) << 16) | ((uvs[i] * 65535) & 0xFFFF);\n\t\t\t\t\tindex += stride;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst _uvs = sprite._texture._uvs.uvsUint32;\n\t\t\t\tindex = oldIndex + 2;\n\t\t\t\tfor (let i = 0; i < n; i += 2) {\n\t\t\t\t\tuint32View[index] = _uvs[i >> 1];\n\t\t\t\t\tindex += stride;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (stride === 6) {\n\t\t\t\tindex = oldIndex + 5;\n\t\t\t\tfor (let i = 0; i < n; i += 2) {\n\t\t\t\t\tfloat32View[index] = textureId;\n\t\t\t\t\tindex += stride;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tPIXI.WebGLRenderer.registerPlugin('spriteHeaven', SpriteHeavenRenderer);\n}","namespace pixi_heaven.webgl {\n\timport MultiTextureSpriteRenderer = pixi_heaven.webgl.MultiTextureSpriteRenderer;\n\n\timport BaseTexture = PIXI.BaseTexture;\n\timport GLBuffer = PIXI.glCore.GLBuffer;\n\timport settings = PIXI.settings;\n\timport premultiplyBlendMode = PIXI.utils.premultiplyBlendMode;\n\n\tconst tempArray = new Float32Array([0, 0, 0, 0]);\n\n\tclass SpriteMaskedRenderer extends MultiTextureSpriteRenderer {\n\t\tshaderVert =\n\t\t\t`precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aLight, aDark;\nattribute float aTextureId;\nattribute vec2 aMaskCoord;\nattribute vec4 aMaskClamp;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\nvarying vec2 vMaskCoord;\nvarying vec4 vMaskClamp;\n\nvoid main(void){\n    gl_Position.xyw = projectionMatrix * vec3(aVertexPosition, 1.0);\n    gl_Position.z = 0.0;\n    \n    vTextureCoord = aTextureCoord;\n    vLight = aLight;\n    vDark = aDark;\n    vTextureId = aTextureId;\n    vMaskCoord = aMaskCoord;\n    vMaskClamp = aMaskClamp;\n}\n`;\n\t\tshaderFrag = `\nvarying vec2 vTextureCoord;\nvarying vec4 vLight, vDark;\nvarying float vTextureId;\nvarying vec2 vMaskCoord;\nvarying vec4 vMaskClamp;\nuniform sampler2D uSamplers[2];\nuniform sampler2D uMask;\n\nvoid main(void) {\nvec4 texColor = texture2D(uSamplers[0], vTextureCoord);\n\nfloat clip = step(3.5,\n    step(vMaskClamp.x, vMaskCoord.x) +\n    step(vMaskClamp.y, vMaskCoord.y) +\n    step(vMaskCoord.x, vMaskClamp.z) +\n    step(vMaskCoord.y, vMaskClamp.w));\n\nvec4 maskColor = texture2D(uSamplers[1], vMaskCoord);\n\nvec2 texCoord = vTextureCoord;\nvec4 fragColor;\nfragColor.a = texColor.a * vLight.a;\nfragColor.rgb = ((texColor.a - 1.0) * vDark.a + 1.0 - texColor.rgb) * vDark.rgb + texColor.rgb * vLight.rgb;\ngl_FragColor = fragColor * (vTextureId * (maskColor.r * clip) + 1.0 - vTextureId);\n}`;\n\n\t\tcreateVao(vertexBuffer: PIXI.glCore.GLBuffer) {\n\t\t\tconst attrs = this.shader.attributes;\n\t\t\tthis.vertSize = 12;\n\t\t\tthis.vertByteSize = this.vertSize * 4;\n\n\n\t\t\tconst gl = this.renderer.gl;\n\t\t\tconst vao = this.renderer.createVao()\n\t\t\t\t.addIndex(this.indexBuffer)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aVertexPosition, gl.FLOAT, false, this.vertByteSize, 0)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aTextureCoord, gl.UNSIGNED_SHORT, true, this.vertByteSize, 2 * 4)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aLight, gl.UNSIGNED_BYTE, true, this.vertByteSize, 3 * 4)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aDark, gl.UNSIGNED_BYTE, true, this.vertByteSize, 4 * 4)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aTextureId, gl.FLOAT, false, this.vertByteSize, 5 * 4)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aMaskCoord, gl.FLOAT, false, this.vertByteSize, 6 * 4)\n\t\t\t\t.addAttribute(vertexBuffer, attrs.aMaskClamp, gl.FLOAT, false, this.vertByteSize, 8 * 4);\n\n\t\t\treturn vao;\n\t\t}\n\n\t\tfillVertices(float32View: Float32Array, uint32View: Uint32Array, index: number, sprite: any, textureId: number) {\n\t\t\t//first, fill the coordinates!\n\n\t\t\tconst vertexData = sprite.vertexData;\n\t\t\tconst n = vertexData.length;\n\n\t\t\tconst lightRgba = sprite.color.lightRgba;\n\t\t\tconst darkRgba = sprite.color.darkRgba;\n\t\t\tconst stride = this.vertSize;\n\n\t\t\tconst mask = sprite.maskSprite;\n\t\t\tlet clamp: any = tempArray;\n\t\t\tlet maskVertexData = tempArray;\n\n\t\t\tif (mask) {\n\t\t\t\tsprite.calculateMaskVertices();\n\t\t\t\tclamp = mask._texture.transform.uClampFrame;\n\t\t\t\tmaskVertexData = sprite.maskVertexData;\n\t\t\t}\n\n\t\t\tconst oldIndex = index;\n\n\t\t\tfor (let i = 0; i < n; i += 2) {\n\t\t\t\tfloat32View[index] = vertexData[i];\n\t\t\t\tfloat32View[index + 1] = vertexData[i + 1];\n\t\t\t\tuint32View[index + 3] = lightRgba;\n\t\t\t\tuint32View[index + 4] = darkRgba;\n\t\t\t\tfloat32View[index + 5] = mask ? 1 : 0;\n\n\t\t\t\tfloat32View[index + 6] = maskVertexData[i];\n\t\t\t\tfloat32View[index + 7] = maskVertexData[i + 1];\n\t\t\t\tfloat32View[index + 8] = clamp[0];\n\t\t\t\tfloat32View[index + 9] = clamp[1];\n\t\t\t\tfloat32View[index + 10] = clamp[2];\n\t\t\t\tfloat32View[index + 11] = clamp[3];\n\n\t\t\t\tindex += stride;\n\t\t\t}\n\n\t\t\tconst uvs = sprite.uvs;\n\t\t\tif (uvs) {\n\t\t\t\tindex = oldIndex + 2;\n\t\t\t\tfor (let i = 0; i < n; i += 2) {\n\t\t\t\t\tuint32View[index] = (((uvs[i + 1] * 65535) & 0xFFFF) << 16) | ((uvs[i] * 65535) & 0xFFFF);\n\t\t\t\t\tindex += stride;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconst _uvs = sprite._texture._uvs.uvsUint32;\n\t\t\t\tindex = oldIndex + 2;\n\t\t\t\tfor (let i = 0; i < n; i += 2) {\n\t\t\t\t\tuint32View[index] = _uvs[i >> 1];\n\t\t\t\t\tindex += stride;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * We need different flush for mask strategy\n\t\t * Renders the content and empties the current batch.\n\t\t *\n\t\t */\n\t\tflush() {\n\t\t\tif (this.currentIndex === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst gl = this.renderer.gl;\n\t\t\tconst MAX_TEXTURES = this.MAX_TEXTURES;\n\n\t\t\tlet np2 = utils.nextPow2((this.countVertex + 3) / 4 | 0);\n\t\t\tlet log2 = utils.log2(np2);\n\t\t\tconst buffer = this.buffers[log2];\n\n\t\t\tnp2 = utils.nextPow2((this.countIndex + 5) / 6 | 0);\n\t\t\tlog2 = utils.log2(np2);\n\t\t\tconst bufferIndex = this.buffersIndex[log2];\n\n\t\t\tconst sprites = this.sprites;\n\t\t\tconst groups = this.groups;\n\n\t\t\tconst float32View = buffer.float32View;\n\t\t\tconst uint32View = buffer.uint32View;\n\n\t\t\t// const touch = 0;// this.renderer.textureGC.count;\n\n\t\t\tlet nextTexture, nextMaskTexture: any;\n\t\t\tlet currentTexture: BaseTexture, currentMaskTexture: BaseTexture = null;\n\t\t\tlet currentUniforms: any = null;\n\t\t\tlet groupCount = 1;\n\t\t\tlet textureCount = 0;\n\t\t\tlet currentGroup = groups[0];\n\t\t\tlet blendMode = premultiplyBlendMode[\n\t\t\t\t(sprites[0] as any)._texture.baseTexture.premultipliedAlpha ? 1 : 0][sprites[0].blendMode];\n\t\t\tlet hasMesh = false;\n\n\t\t\tcurrentGroup.textureCount = 0;\n\t\t\tcurrentGroup.start = 0;\n\t\t\tcurrentGroup.blend = blendMode;\n\n\t\t\tlet i;\n\t\t\tlet posVertex = 0;\n\t\t\tlet posIndex = 0;\n\n\t\t\tfor (i = 0; i < this.currentIndex; ++i) {\n\t\t\t\t// upload the sprite elemetns...\n\t\t\t\t// they have all ready been calculated so we just need to push them into the buffer.\n\n\t\t\t\t// upload the sprite elemetns...\n\t\t\t\t// they have all ready been calculated so we just need to push them into the buffer.\n\t\t\t\tconst sprite = sprites[i];\n\n\t\t\t\tnextTexture = (sprite as any).texture.baseTexture;\n\t\t\t\tnextMaskTexture = null;\n\n\t\t\t\tif (sprite.maskSprite) {\n\t\t\t\t\tsprite.calculateMaskVertices();\n\t\t\t\t\tnextMaskTexture = sprite.maskSprite.texture.baseTexture;\n\n\t\t\t\t\tif (currentMaskTexture === null) {\n\t\t\t\t\t\tcurrentMaskTexture = nextMaskTexture;\n\t\t\t\t\t\tcurrentGroup.textures[1] = nextMaskTexture;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentTexture = null;\n\t\t\t\t\t\tcurrentMaskTexture = null;\n\t\t\t\t\t\ttextureCount = MAX_TEXTURES;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst spriteBlendMode = premultiplyBlendMode[Number(nextTexture.premultipliedAlpha)][sprite.blendMode];\n\n\t\t\t\tif (blendMode !== spriteBlendMode) {\n\t\t\t\t\t// finish a group..\n\t\t\t\t\tblendMode = spriteBlendMode;\n\n\t\t\t\t\t// force the batch to break!\n\t\t\t\t\tcurrentTexture = null;\n\t\t\t\t\tcurrentMaskTexture = null;\n\t\t\t\t\ttextureCount = MAX_TEXTURES;\n\t\t\t\t}\n\n\t\t\t\tconst uniforms = this.getUniforms(sprite);\n\t\t\t\tif (currentUniforms !== uniforms) {\n\t\t\t\t\tcurrentUniforms = uniforms;\n\n\t\t\t\t\tcurrentTexture = null;\n\t\t\t\t\tcurrentMaskTexture = null;\n\t\t\t\t\ttextureCount = MAX_TEXTURES;\n\t\t\t\t}\n\n\t\t\t\tif (currentTexture !== nextTexture) {\n\t\t\t\t\tcurrentTexture = nextTexture;\n\t\t\t\t\tcurrentMaskTexture = nextMaskTexture;\n\n\t\t\t\t\tif (textureCount === MAX_TEXTURES) {\n\n\t\t\t\t\t\ttextureCount = 0;\n\n\t\t\t\t\t\tcurrentGroup.size = i - currentGroup.start;\n\n\t\t\t\t\t\tcurrentGroup = groups[groupCount++];\n\t\t\t\t\t\tcurrentGroup.textureCount = 0;\n\t\t\t\t\t\tcurrentGroup.blend = blendMode;\n\t\t\t\t\t\tcurrentGroup.start = i;\n\t\t\t\t\t\tcurrentGroup.uniforms = currentUniforms;\n\t\t\t\t\t}\n\n\t\t\t\t\t//nextTexture._enabled = TICK;\n\t\t\t\t\tnextTexture._virtalBoundId = textureCount;\n\n\t\t\t\t\tcurrentGroup.textureCount = MAX_TEXTURES;\n\t\t\t\t\tcurrentGroup.textures[0] = nextTexture;\n\t\t\t\t\tcurrentGroup.textures[1] = nextMaskTexture || PIXI.Texture.WHITE.baseTexture;\n\t\t\t\t\ttextureCount = MAX_TEXTURES;\n\t\t\t\t}\n\n\t\t\t\tthis.fillVertices(float32View, uint32View, posVertex * this.vertSize, sprite, nextTexture._virtalBoundId);\n\n\t\t\t\tif (sprite.indices) {\n\t\t\t\t\tconst len = sprite.indices.length;\n\t\t\t\t\tfor (let k=0; k<len; k++) {\n\t\t\t\t\t\tbufferIndex[posIndex++] = posVertex + sprite.indices[k];\n\t\t\t\t\t}\n\t\t\t\t\thasMesh = true;\n\t\t\t\t} else {\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 1;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 2;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 2;\n\t\t\t\t\tbufferIndex[posIndex++] = posVertex + 3;\n\t\t\t\t}\n\t\t\t\tposVertex += sprite.vertexData.length / 2;\n\t\t\t}\n\n\t\t\tcurrentGroup.size = posIndex - currentGroup.start;\n\n\t\t\tconst curVertexCount = this.vertexCount;\n\t\t\tconst isNewBuffer = this.checkVaoMax();\n\t\t\tconst ib = hasMesh ? this.indexBuffers[curVertexCount] : this.indexBuffer;\n\n\t\t\tthis.vertexBuffers[curVertexCount].upload(buffer.vertices, 0, !isNewBuffer);\n\t\t\tib.bind();\n\n\t\t\t// / render the groups..\n\t\t\tfor (i = 0; i < groupCount; i++) {\n\t\t\t\tconst group = groups[i];\n\t\t\t\tconst groupTextureCount = 2;// group.textureCount;\n\n\t\t\t\tif (group.uniforms !== currentUniforms) {\n\t\t\t\t\tthis.syncUniforms(group.uniforms);\n\t\t\t\t}\n\n\t\t\t\tfor (let j = 0; j < groupTextureCount; j++) {\n\t\t\t\t\tthis.renderer.bindTexture(group.textures[j], j, true);\n\t\t\t\t\tgroup.textures[j]._virtalBoundId = -1;\n\n\t\t\t\t\tconst v = this.shader.uniforms.samplerSize;\n\t\t\t\t\tif (v) {\n\t\t\t\t\t\tv[0] = group.textures[j].realWidth;\n\t\t\t\t\t\tv[1] = group.textures[j].realHeight;\n\t\t\t\t\t\tthis.shader.uniforms.samplerSize = v;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// set the blend mode..\n\t\t\t\tthis.renderer.state.setBlendMode(group.blend);\n\n\t\t\t\tgl.drawElements(gl.TRIANGLES, group.size * 6, gl.UNSIGNED_SHORT, group.start * 6 * 2);\n\t\t\t}\n\n\t\t\t// reset sprites for the next flush\n\t\t\tthis.currentIndex = 0;\n\t\t\tthis.countVertex = 0;\n\t\t\tthis.countIndex = 0;\n\t\t}\n\n\t\tgenShader() {\n\t\t\tconst gl = this.renderer.gl;\n\n\t\t\tthis.MAX_TEXTURES = 2;\n\n\t\t\tthis.shader = generateMultiTextureShader(this.shaderVert, this.shaderFrag, gl, this.MAX_TEXTURES);\n\t\t}\n\t}\n\n\tPIXI.WebGLRenderer.registerPlugin('spriteMasked', SpriteMaskedRenderer);\n}","namespace pixi_heaven {\n\texport class SpriteModel {\n\n\t}\n}","namespace pixi_heaven {\n\t// export class Text2d extends PIXI.Text {\n     //    constructor(text?: string, style?: PIXI.TextStyle, canvas?: HTMLCanvasElement) {\n     //        super(text, style, canvas);\n     //        this.proj = new Projection2d(this.transform);\n     //        this.pluginName = 'sprite2d';\n     //        this.vertexData = new Float32Array(12);\n     //    }\n\t//\n     //    proj: Projection2d;\n\t//\n     //    get worldTransform() {\n\t//         return this.proj.affine ? this.transform.worldTransform : this.proj.world as any;\n     //    }\n\t// }\n\t//\n\t// Text2d.prototype.calculateVertices = Sprite2d.prototype.calculateVertices;\n\t// (Text2d.prototype as any).calculateTrimmedVertices = Sprite2d.prototype.calculateTrimmedVertices;\n\t// (Text2d.prototype as any)._calculateBounds = Sprite2d.prototype._calculateBounds;\n}\n","///<reference types=\"pixi-spine\"/>\nnamespace pixi_heaven.spine {\n\n\texport class Spine extends PIXI.spine.Spine {\n\t\thasSpriteMask: boolean = false;\n\t\tcolor = new ColorTransform();\n\n\t\tconstructor(spineData: PIXI.spine.core.SkeletonData) {\n\t\t\tsuper(spineData);\n\t\t}\n\n\t\tnewSprite(tex: PIXI.Texture): any {\n\t\t\treturn new SpineSprite(tex, this);\n\t\t}\n\n\t\tnewMesh(texture: PIXI.Texture, vertices?: Float32Array, uvs?: Float32Array, indices?: Uint16Array, drawMode?: number) {\n\t\t\tlet m = new mesh.Mesh(texture, vertices, uvs, indices, drawMode) as any;\n\t\t\tm.pluginName = settings.SPINE_MESH_PLUGIN;\n\t\t\treturn m;\n\t\t}\n\t}\n\n\texport class SpineSprite extends Sprite {\n\t\tregion: PIXI.spine.core.TextureRegion = null;\n\t\tspine: Spine;\n\n\t\tconstructor(tex: PIXI.Texture, spine: Spine) {\n\t\t\tsuper(tex);\n\t\t\tthis.spine = spine;\n\t\t}\n\n\t\t_renderWebGL(renderer: PIXI.WebGLRenderer) {\n\t\t\tif (this.maskSprite) {\n\t\t\t\tthis.spine.hasSpriteMask = true;\n\t\t\t}\n\t\t\tif (this.spine.hasSpriteMask) {\n\t\t\t\tthis.pluginName = 'spriteMasked';\n\t\t\t}\n\t\t\tsuper._renderWebGL(renderer);\n\t\t}\n\t}\n}\n"]}